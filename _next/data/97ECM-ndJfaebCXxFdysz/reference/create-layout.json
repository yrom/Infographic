{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#basic\",\"depth\":2,\"text\":\"基本思路 \"},{\"url\":\"#built-in\",\"depth\":2,\"text\":\"内置示例 \"},{\"url\":\"#tips\",\"depth\":2,\"text\":\"实践指南 \"}]","content":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"布局组件用于在信息图中复用排版逻辑，例如横向/纵向堆叠、水平垂直对齐或网格排列。你可以用 \",[\"$r\",\"code\",null,{\"children\":\"createLayout\"}],\" 把这些排版规则封装成一个 JSX 组件，像使用普通节点一样嵌套在图形里。\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"basic\",\"children\":\"基本思路 \"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"定义布局：使用 \",[\"$r\",\"code\",null,{\"children\":\"createLayout\"}],\" 包裹一个函数，函数会拿到子元素列表和你的自定义属性。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"计算位置：通过\",[\"$r\",\"code\",null,{\"children\":\"getElementBounds\"}],\"获取子元素的包围盒，计算新的 \",[\"$r\",\"code\",null,{\"children\":\"x\"}],\"/\",[\"$r\",\"code\",null,{\"children\":\"y\"}],\"，并返回调整后的节点树。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"嵌套使用：在 JSX 中像普通组件一样使用你的布局，布局会在渲染前被展开。\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"关于工具函数的更多细节，请参见\",[\"$r\",\"a\",null,{\"href\":\"/reference/jsx-utils\",\"children\":\"工具函数\"}],\"一章。\"]}]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import {\\n  createLayout,\\n  cloneElement,\\n  getElementBounds,\\n  Group,\\n} from '@antv/infographic/jsx';\\n\\n// 简单的垂直堆叠布局\\nexport const Stack = createLayout<{gap?: number}>(\\n  (children, {gap = 8, ...props}) => {\\n    let offsetY = 0;\\n    const placed = children.map((child) => {\\n      const bounds = getElementBounds(child);\\n      const next = cloneElement(child, {x: 0, y: offsetY});\\n      offsetY += bounds.height + gap;\\n      return next;\\n    });\\n    // 用 Group 包一层，方便继续平移或套用样式\\n    return <Group {...props}>{placed}</Group>;\\n  }\\n);\\n\\n// 使用\\nconst Card = () => (\\n  <Stack x={20} y={20} gap={12}>\\n    <Rect width={200} height={80} fill=\\\"#EEF3FF\\\" rx={12} />\\n    <Text width={200} height={24}>\\n      Title\\n    </Text>\\n    <Text width={200} height={40} alignVertical=\\\"middle\\\">\\n      Description\\n    </Text>\\n  </Stack>\\n);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"built-in\",\"children\":\"内置示例 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"AlignLayout\"}],\"：让一组元素在容器内左/中/右、上/中/下对齐。当未设置容器宽高时，会根据子元素尺寸自动推断。使用示例：\",\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"<AlignLayout horizontal=\\\"center\\\" vertical=\\\"middle\\\">\\n  <Rect width={120} height={60} />\\n  <Text width={120} height={24} alignHorizontal=\\\"center\\\">\\n    居中\\n  </Text>\\n</AlignLayout>\\n\"}]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"FlexLayout\"}],\"：类 Flex 排版，支持 \",[\"$r\",\"code\",null,{\"children\":\"flexDirection\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"justifyContent\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"alignItems\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"flexWrap\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"gap\"}],\" 等属性，内建换行、间距和主/交叉轴对齐。容器有尺寸时按容器分布；无尺寸时根据子元素自动收拢。\",\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"<FlexLayout width={320} height={200} gap={12} justifyContent=\\\"space-between\\\">\\n  <Rect width={80} height={80} />\\n  <Rect width={80} height={80} />\\n  <Rect width={80} height={80} />\\n</FlexLayout>\\n\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"tips\",\"children\":\"实践指南 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"优先用 \",[\"$r\",\"code\",null,{\"children\":\"getElementBounds\"}],\"，避免手写尺寸；缺省容器大小时可用 \",[\"$r\",\"code\",null,{\"children\":\"getElementsBounds\"}],\" 自动回填。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"如果需要组合自定义变换，可在布局里写入最终的 \",[\"$r\",\"code\",null,{\"children\":\"transform\"}],\"，或直接平移 \",[\"$r\",\"code\",null,{\"children\":\"Group\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"适合将布局与主题/模板结合：把样式交给外部 props，布局只关注坐标计算，这样可重复复用同一排版逻辑。\"}],\"\\n\"]}]]}]]","meta":{"title":"创建布局"},"languages":null,"tocEn":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#basic\",\"depth\":2,\"text\":\"Basic Concept \"},{\"url\":\"#built-in\",\"depth\":2,\"text\":\"Built-in Examples \"},{\"url\":\"#tips\",\"depth\":2,\"text\":\"Practice Guide \"}]","contentEn":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"Layout components are used to reuse layout logic in infographics, such as horizontal/vertical stacking, horizontal/vertical alignment, or grid arrangement. You can use \",[\"$r\",\"code\",null,{\"children\":\"createLayout\"}],\" to encapsulate these layout rules into a JSX component and nest it in graphics just like using regular nodes.\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"basic\",\"children\":\"Basic Concept \"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Define layout: Use \",[\"$r\",\"code\",null,{\"children\":\"createLayout\"}],\" to wrap a function that receives a list of child elements and your custom properties.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Calculate positions: Get the bounding box of child elements through \",[\"$r\",\"code\",null,{\"children\":\"getElementBounds\"}],\", calculate new \",[\"$r\",\"code\",null,{\"children\":\"x\"}],\"/\",[\"$r\",\"code\",null,{\"children\":\"y\"}],\", and return the adjusted node tree.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"Nested usage: Use your layout like a regular component in JSX, and the layout will be expanded before rendering.\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"For more details about utility functions, please refer to the \",[\"$r\",\"a\",null,{\"href\":\"/reference/jsx-utils\",\"children\":\"Utility Functions\"}],\" chapter.\"]}]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-tsx\",\"children\":\"import {\\n  createLayout,\\n  cloneElement,\\n  getElementBounds,\\n  Group,\\n} from '@antv/infographic/jsx';\\n\\n// Simple vertical stacking layout\\nexport const Stack = createLayout<{gap?: number}>(\\n  (children, {gap = 8, ...props}) => {\\n    let offsetY = 0;\\n    const placed = children.map((child) => {\\n      const bounds = getElementBounds(child);\\n      const next = cloneElement(child, {x: 0, y: offsetY});\\n      offsetY += bounds.height + gap;\\n      return next;\\n    });\\n    // Wrap with Group for easier translation or style application\\n    return <Group {...props}>{placed}</Group>;\\n  }\\n);\\n\\n// Usage\\nconst Card = () => (\\n  <Stack x={20} y={20} gap={12}>\\n    <Rect width={200} height={80} fill=\\\"#EEF3FF\\\" rx={12} />\\n    <Text width={200} height={24}>\\n      Title\\n    </Text>\\n    <Text width={200} height={40} alignVertical=\\\"middle\\\">\\n      Description\\n    </Text>\\n  </Stack>\\n);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"built-in\",\"children\":\"Built-in Examples \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"AlignLayout\"}],\": Aligns a group of elements left/center/right, top/middle/bottom within a container. When container width and height are not set, it will automatically infer from child element sizes. Usage example:\",\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"<AlignLayout horizontal=\\\"center\\\" vertical=\\\"middle\\\">\\n  <Rect width={120} height={60} />\\n  <Text width={120} height={24} alignHorizontal=\\\"center\\\">\\n    Centered\\n  </Text>\\n</AlignLayout>\\n\"}]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"FlexLayout\"}],\": Flex-like layout, supports \",[\"$r\",\"code\",null,{\"children\":\"flexDirection\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"justifyContent\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"alignItems\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"flexWrap\"}],\", \",[\"$r\",\"code\",null,{\"children\":\"gap\"}],\" and other properties, with built-in wrapping, spacing, and main/cross axis alignment. When the container has a size, it distributes according to the container; when it has no size, it automatically shrinks according to child elements.\",\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"children\":\"<FlexLayout width={320} height={200} gap={12} justifyContent=\\\"space-between\\\">\\n  <Rect width={80} height={80} />\\n  <Rect width={80} height={80} />\\n  <Rect width={80} height={80} />\\n</FlexLayout>\\n\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"tips\",\"children\":\"Practice Guide \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Prioritize using \",[\"$r\",\"code\",null,{\"children\":\"getElementBounds\"}],\", avoid manually writing sizes; when the default container size is missing, you can use \",[\"$r\",\"code\",null,{\"children\":\"getElementsBounds\"}],\" to automatically backfill.\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"If you need to combine custom transformations, you can write the final \",[\"$r\",\"code\",null,{\"children\":\"transform\"}],\" in the layout, or directly translate the \",[\"$r\",\"code\",null,{\"children\":\"Group\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"Suitable for combining layouts with themes/templates: pass styles to external props, and the layout only focuses on coordinate calculations, so the same layout logic can be reused repeatedly.\"}],\"\\n\"]}]]}]]","metaEn":{"title":"Create Layout"}},"__N_SSG":true}