{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#simple-example\",\"depth\":2,\"text\":\"ç®€å•ç¤ºä¾‹ \"},{\"url\":\"#full-example\",\"depth\":2,\"text\":\"å®Œæ•´ç¤ºä¾‹ \"},{\"url\":\"#å·¥å…·å‡½æ•°\",\"depth\":2,\"text\":\"å·¥å…·å‡½æ•° \"},{\"url\":\"#loadsvgresource---svg-èµ„æºè½¬æ¢\",\"depth\":3,\"text\":\"loadSVGResource() - SVG èµ„æºè½¬æ¢ \"},{\"url\":\"#loadimagebase64resource---å›¾ç‰‡èµ„æºè½¬æ¢\",\"depth\":3,\"text\":\"loadImageBase64Resource() - å›¾ç‰‡èµ„æºè½¬æ¢ \"},{\"url\":\"#loadremoteresource---è¿œç¨‹èµ„æºåŠ è½½\",\"depth\":3,\"text\":\"loadRemoteResource() - è¿œç¨‹èµ„æºåŠ è½½ \"},{\"url\":\"#advanced-usage\",\"depth\":2,\"text\":\"é«˜çº§ç”¨æ³• \"},{\"url\":\"#cache-optimization\",\"depth\":3,\"text\":\"ç¼“å­˜ä¼˜åŒ– \"},{\"url\":\"#error-handling\",\"depth\":3,\"text\":\"é”™è¯¯å¤„ç† \"},{\"url\":\"#multiple-formats\",\"depth\":3,\"text\":\"æ”¯æŒå¤šç§èµ„æºæ ¼å¼ \"},{\"url\":\"#preload-resources\",\"depth\":3,\"text\":\"é¢„åŠ è½½èµ„æº \"},{\"url\":\"#best-practices\",\"depth\":2,\"text\":\"æœ€ä½³å®è·µ \"},{\"url\":\"#meaningful-resource-identifiers\",\"depth\":3,\"text\":\"1. ä½¿ç”¨æœ‰æ„ä¹‰çš„èµ„æºæ ‡è¯†ç¬¦ \"},{\"url\":\"#uniform-resource-protocol\",\"depth\":3,\"text\":\"2. ç»Ÿä¸€èµ„æºåè®® \"},{\"url\":\"#loading-state\",\"depth\":3,\"text\":\"3. å®ç°åŠ è½½çŠ¶æ€ \"},{\"url\":\"#error-degradation\",\"depth\":3,\"text\":\"4. é”™è¯¯é™çº§ \"},{\"url\":\"#considerations\",\"depth\":2,\"text\":\"æ³¨æ„äº‹é¡¹ \"},{\"url\":\"#single-loader\",\"depth\":3,\"text\":\"1. å•ä¸€åŠ è½½å™¨ \"},{\"url\":\"#async-loading\",\"depth\":3,\"text\":\"2. å¼‚æ­¥èµ„æºåŠ è½½ \"}]","content":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"Note\",null,{\"children\":[\"å¦‚æœä½ ä¸äº†è§£èµ„æºçš„æ¦‚å¿µï¼Œå¯ä»¥å…ˆé˜…è¯»\",[\"$r\",\"a\",null,{\"href\":\"/learn/resources\",\"children\":\"èµ„æº\"}],\"ä¸€èŠ‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å½“å†…ç½®åè®®ä¸è¶³ä»¥æ»¡è¶³èµ„æºæ¥æºæ—¶ï¼Œå¯ä»¥æ³¨å†Œè‡ªå®šä¹‰èµ„æºåŠ è½½å™¨ï¼Œæ‰©å±•å›¾æ ‡ã€æ’å›¾ç­‰çš„è·å–æ–¹å¼ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å®ç°æµç¨‹å¾ˆç®€å•ï¼š\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"registerResourceLoader\"}],\" æ³¨å†ŒåŠ è½½å‡½æ•°\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"åœ¨å‡½æ•°å†…è§£æåè®®ã€æ‹‰å–èµ„æº\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"é€šè¿‡å·¥å…·å‡½æ•°ï¼ˆå¦‚ \",[\"$r\",\"code\",null,{\"children\":\"loadSVGResource\"}],\"ï¼‰è¿”å›æ ‡å‡†èµ„æºå¯¹è±¡\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"@antv/infographic\"}],\" è¿˜æä¾›äº† \",[\"$r\",\"code\",null,{\"children\":\"loadSVGResource\"}],\" ç­‰å·¥å…·å‡½æ•°ï¼Œå¸®åŠ©å°†å†…å®¹è½¬æ¢ä¸ºæ¡†æ¶å¯è¯†åˆ«çš„èµ„æºã€‚\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"simple-example\",\"children\":\"ç®€å•ç¤ºä¾‹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå®ƒä»\",[\"$r\",\"a\",null,{\"href\":\"https://iconify.design/\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"iconify\"}],\"åŠ è½½å›¾æ ‡ï¼Œå¹¶ä»\",[\"$r\",\"code\",null,{\"children\":\"balazser/undraw-svg-collection\"}],\"çš„ \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/balazser/undraw-svg-collection\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Github ä»“åº“\"}],\"åŠ è½½æ’å›¾ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import {registerResourceLoader, loadSVGResource} from '@antv/infographic';\\n\\n// æ³¨å†Œèµ„æºåŠ è½½å™¨\\nregisterResourceLoader(async (config) => {\\n  const {scene = 'icon', data} = config; // scene åŒºåˆ† icon / illus\\n\\n  // è§£æèµ„æº IDï¼ˆå¯ä»¥è‡ªå®šä¹‰ä½ çš„åè®®ï¼Œè¿™é‡Œå‡è®¾ data ç›´æ¥æ˜¯ IDï¼‰\\n  // icon ä½¿ç”¨ iconifyï¼Œillus ä½¿ç”¨ undraw é›†åˆ\\n  let url: string;\\n\\n  if (scene === 'icon') {\\n    url = `https://api.iconify.design/${data}.svg`;\\n  } else {\\n    url = `https://raw.githubusercontent.com/balazser/undraw-svg-collection/refs/heads/main/svgs/${data}.svg`;\\n  }\\n\\n  // è¯·æ±‚èµ„æº\\n  const response = await fetch(url);\\n  const svgString = await response.text();\\n\\n  // ä½¿ç”¨å·¥å…·å‡½æ•°åŠ è½½èµ„æº\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":\"å— CORS é™åˆ¶ï¼Œç¡®ä¿ç›®æ ‡æœåŠ¡å™¨é…ç½®äº†æ­£ç¡®çš„è·¨åŸŸå“åº”å¤´\"}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"full-example\",\"children\":\"å®Œæ•´ç¤ºä¾‹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªå®šä¹‰åŠ è½½å™¨ç¤ºä¾‹\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {\\n  registerResourceLoader,\\n  loadSVGResource,\\n  Infographic,\\n} from '@antv/infographic';\\n\\n// ä»æœåŠ¡å™¨è·å–èµ„æºçš„å‡½æ•°\\nasync function fetchFromYourServer(scene: string, id: string): Promise<string> {\\n  const response = await fetch(\\n    `https://your-api.com/assets?type=${scene}&id=${id}`\\n  );\\n  return await response.text();\\n}\\n\\n// æ³¨å†Œèµ„æºåŠ è½½å™¨\\nregisterResourceLoader(async (config) => {\\n  const {data, scene = 'icon'} = config;\\n\\n  // è§£æèµ„æº IDï¼ˆè¿™é‡Œå‡è®¾ data å³ IDï¼›å¯è‡ªè¡Œæ‰©å±•åè®®ï¼‰\\n  const id = data;\\n\\n  // ä»ä½ çš„æœåŠ¡å™¨åŠ è½½èµ„æº\\n  const svgString = await fetchFromYourServer(scene, id);\\n\\n  // è½¬æ¢ä¸º SVG èµ„æºå¯¹è±¡\\n  return loadSVGResource(svgString);\\n});\\n\\n// ä½¿ç”¨\\nconst infographic = new Infographic({\\n  // å…¶ä»–é…ç½®é¡¹...\\n});\\n\\ninfographic.render(`\\ndata\\n  items\\n    - icon star # ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œscene ä¸º icon\\n      label ç‰¹æ€§ 1\\n      desc ä½¿ç”¨è‡ªå®šä¹‰èµ„æºåè®®\\n      illus chart-growth # ä½¿ç”¨è‡ªå®šä¹‰åè®®ï¼Œscene ä¸º illus\\n`);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"å·¥å…·å‡½æ•°\",\"children\":\"å·¥å…·å‡½æ•° \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æ¡†æ¶æä¾›äº†å·¥å…·å‡½æ•°å¸®åŠ©åœ¨è‡ªå®šä¹‰åŠ è½½å™¨ä¸­å¤„ç†ä¸åŒæ ¼å¼çš„èµ„æºã€‚\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadsvgresource---svg-èµ„æºè½¬æ¢\",\"children\":\"loadSVGResource() - SVG èµ„æºè½¬æ¢ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æœ€å¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼Œç”¨äºå°† SVG å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ¡†æ¶å¯ç”¨çš„èµ„æºå¯¹è±¡ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åŸºæœ¬ç”¨æ³•\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadSVGResource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  // ä»æœåŠ¡å™¨è·å– SVG å­—ç¬¦ä¸²\\n  const svgString = await fetch(`/api/icons/${config.data}`).then((r) =>\\n    r.text()\\n  );\\n\\n  // è½¬æ¢ä¸ºèµ„æºå¯¹è±¡\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"å¤„ç†ä¸åŒçš„ SVG æ ¼å¼\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// æ”¯æŒ <svg> æ ‡ç­¾\\nconst svg1 = '<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">...</svg>';\\nloadSVGResource(svg1); // âœ… è‡ªåŠ¨è½¬æ¢\\n\\n// æ”¯æŒ <symbol> æ ‡ç­¾\\nconst svg2 = '<symbol id=\\\"icon-star\\\">...</symbol>';\\nloadSVGResource(svg2); // âœ… ç›´æ¥ä½¿ç”¨\\n\\n// å¤„ç†å¯èƒ½çš„è§£æå¤±è´¥\\nconst resource = loadSVGResource(svgString);\\nif (!resource) {\\n  console.error('SVG è§£æå¤±è´¥');\\n}\\n\"}]}],\"\\n\",[\"$r\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ğŸ’¡ \",[\"$r\",\"strong\",null,{\"children\":\"æç¤º\"}],\"ï¼šå®Œæ•´çš„ API å‚æ•°è¯´æ˜è¯·å‚è€ƒ \",[\"$r\",\"a\",null,{\"href\":\"/learn/resources\",\"children\":\"æ ¸å¿ƒæ¦‚å¿µ - èµ„æº\"}]]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadimagebase64resource---å›¾ç‰‡èµ„æºè½¬æ¢\",\"children\":\"loadImageBase64Resource() - å›¾ç‰‡èµ„æºè½¬æ¢ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç”¨äºåŠ è½½ Base64 ç¼–ç çš„å›¾ç‰‡ï¼ˆPNGã€JPEGã€GIF ç­‰ï¼‰ï¼Œè‡ªåŠ¨è½¬æ¢ä¸º SVG æ ¼å¼ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åŸºæœ¬ç”¨æ³•\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadImageBase64Resource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  if (config.data.startsWith('img:')) {\\n    // è·å–å›¾ç‰‡çš„ Base64 æ•°æ®\\n    const base64 = await fetchImageAsBase64(config.data);\\n\\n    // è½¬æ¢ä¸ºèµ„æºå¯¹è±¡ï¼ˆå¼‚æ­¥ï¼‰\\n    return await loadImageBase64Resource(base64);\\n  }\\n\\n  // å¤„ç†å…¶ä»–ç±»å‹...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åº”ç”¨åœºæ™¯\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// åœºæ™¯ï¼šæ”¯æŒç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡ä½œä¸ºå›¾æ ‡\\nregisterResourceLoader(async (config) => {\\n  if (config.type === 'image') {\\n    // config.data å·²ç»æ˜¯ Base64 æ ¼å¼\\n    return await loadImageBase64Resource(config.data);\\n  }\\n\\n  // é»˜è®¤ä»æœåŠ¡å™¨åŠ è½½ SVG\\n  const svgString = await fetchFromServer(config.data);\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"âš ï¸ \",[\"$r\",\"strong\",null,{\"children\":\"æ³¨æ„\"}],\"ï¼šæ­¤å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œéœ€è¦ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"await\"}]]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadremoteresource---è¿œç¨‹èµ„æºåŠ è½½\",\"children\":\"loadRemoteResource() - è¿œç¨‹èµ„æºåŠ è½½ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä»è¿œç¨‹ URL åŠ è½½ SVG èµ„æºï¼Œé€šå¸¸åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨è‡ªå®šä¹‰åœºæ™¯ä¸­ä½¿ç”¨ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åŸºæœ¬ç”¨æ³•\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadRemoteResource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  if (config.data.startsWith('http://') || config.data.startsWith('https://')) {\\n    // ç›´æ¥ä» URL åŠ è½½\\n    return await loadRemoteResource(config.data);\\n  }\\n\\n  // å¤„ç†å…¶ä»–åè®®...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"ç»“åˆç¼“å­˜ä½¿ç”¨\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const cache = new Map<string, Resource>();\\n\\nregisterResourceLoader(async (config) => {\\n  const url = config.data;\\n\\n  // æ£€æŸ¥ç¼“å­˜\\n  if (cache.has(url)) {\\n    return cache.get(url)!;\\n  }\\n\\n  // åŠ è½½è¿œç¨‹èµ„æº\\n  const resource = await loadRemoteResource(url);\\n\\n  // å­˜å…¥ç¼“å­˜\\n  if (resource) {\\n    cache.set(url, resource);\\n  }\\n\\n  return resource;\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"advanced-usage\",\"children\":\"é«˜çº§ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"cache-optimization\",\"children\":\"ç¼“å­˜ä¼˜åŒ– \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸ºæé«˜æ€§èƒ½ï¼Œå»ºè®®åœ¨åŠ è½½å™¨ä¸­å®ç°ç¼“å­˜ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const resourceCache = new Map<string, string>();\\n\\nregisterResourceLoader(async (config) => {\\n  const {data, scene} = config;\\n\\n  // æ£€æŸ¥ç¼“å­˜\\n  const key = `${scene || 'default'}:${data}`;\\n  if (resourceCache.has(key)) {\\n    return loadSVGResource(resourceCache.get(key)!);\\n  }\\n\\n  // åŠ è½½èµ„æº\\n  const svgString = await fetchFromYourServer(scene, data);\\n\\n  // å­˜å…¥ç¼“å­˜\\n  resourceCache.set(key, svgString);\\n\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"error-handling\",\"children\":\"é”™è¯¯å¤„ç† \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åŠ è½½å¤±è´¥æ—¶è¿”å›é»˜è®¤èµ„æºï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  try {\\n    const svgString = await fetchFromYourServer(config.data);\\n    return loadSVGResource(svgString);\\n  } catch (error) {\\n    console.error('èµ„æºåŠ è½½å¤±è´¥:', error);\\n\\n    // è¿”å›é»˜è®¤ SVG\\n    const fallbackSVG = '<svg>...</svg>';\\n    return loadSVGResource(fallbackSVG);\\n  }\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"multiple-formats\",\"children\":\"æ”¯æŒå¤šç§èµ„æºæ ¼å¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æ ¹æ®èµ„æºç±»å‹ä½¿ç”¨ä¸åŒçš„åŠ è½½ç­–ç•¥ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {\\n  registerResourceLoader,\\n  loadSVGResource,\\n  loadImageBase64Resource,\\n} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  const {data, scene = 'icon', format} = config;\\n\\n  if (typeof data === 'string' && data.startsWith('img:')) {\\n    const resourceId = data.slice(4);\\n    const imageBase64 = await fetchImageAsBase64(resourceId);\\n    return loadImageBase64Resource(imageBase64);\\n  }\\n\\n  // å…¶å®ƒåœºæ™¯æŒ‰ SVG å¤„ç†ï¼Œå¯ç”¨ scene åšåŒºåˆ†\\n  const svg =\\n    scene === 'illus'\\n      ? await fetchIllustration(data)\\n      : await fetchIcon(data, format);\\n  return loadSVGResource(svg);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preload-resources\",\"children\":\"é¢„åŠ è½½èµ„æº \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åœ¨æ¸²æŸ“å‰é¢„åŠ è½½æ‰€æœ‰èµ„æºï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {Infographic} from '@antv/infographic';\\n\\n// æå–æ‰€æœ‰èµ„æºæ ‡è¯†ç¬¦\\nfunction extractResourceEntries(data: Data): Array<{scene: 'icon' | 'illus'; id: string}> {\\n  const entries: Array<{scene: 'icon' | 'illus'; id: string}> = [];\\n\\n  data.items.forEach((item) => {\\n    if (item.icon) entries.push({scene: 'icon', id: item.icon as string});\\n    if (item.illus) entries.push({scene: 'illus', id: item.illus as string});\\n  });\\n\\n  return entries;\\n}\\n\\n// é¢„åŠ è½½èµ„æº\\nasync function preloadResources(data: Data) {\\n  const entries = extractResourceEntries(data);\\n\\n  await Promise.all(entries.map(({scene, id}) => fetchFromYourServer(scene, id)));\\n}\\n\\n// ä½¿ç”¨\\nconst data = {\\n  // ä¸è¯­æ³•ä¸­çš„æ•°æ®ä¿æŒä¸€è‡´\\n  items: [\\n    {icon: '1', /** ... */},\\n    {icon: '2', /** ... */},\\n    {icon: '3', /** ... */},\\n  ],\\n};\\n\\n// å…ˆé¢„åŠ è½½\\nawait preloadResources(data);\\n\\n// å†æ¸²æŸ“\\nconst infographic = new Infographic({\\n  // å…¶ä»–é…ç½®é¡¹...\\n});\\n\\ninfographic.render(`\\ninfographic list-row-horizontal-icon-arrow\\ndata\\n  title é¢„åŠ è½½ç¤ºä¾‹\\n  items\\n    - icon 1\\n      label æ•°æ®é¡¹ 1\\n    - icon 2\\n      label æ•°æ®é¡¹ 2\\n    - icon 3\\n      label æ•°æ®é¡¹ 3\\n`);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"best-practices\",\"children\":\"æœ€ä½³å®è·µ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"meaningful-resource-identifiers\",\"children\":\"1. ä½¿ç”¨æœ‰æ„ä¹‰çš„èµ„æºæ ‡è¯†ç¬¦ \"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// æ¨èï¼šæ¸…æ™°çš„å‘½å\\nicon: 'user-profile';\\nicon: 'chart-bar';\\nillus: 'dashboard-overview';\\n\\n// ä¸æ¨èï¼šéš¾ä»¥ç†è§£çš„æ ‡è¯†ç¬¦\\nicon: 'res001';\\nicon: 'abc123';\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"uniform-resource-protocol\",\"children\":\"2. ç»Ÿä¸€èµ„æºåè®® \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ç»Ÿä¸€çš„èµ„æºåè®®æ ¼å¼ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// ç»Ÿä¸€ä½¿ç”¨ ID æˆ– ref åè®®\\nicon: 'ref:remote:https://example.com/star.svg'\\nillus: 'chart-1'\\n\\n// æˆ–ä½¿ç”¨å¯¹è±¡æ ¼å¼ï¼Œsource/format è‡ªæè¿°\\nicon: { source: 'remote', format: 'svg', data: 'https://example.com/star.svg' }\\nillus: { source: 'inline', format: 'svg', data: '<svg>...</svg>' }\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loading-state\",\"children\":\"3. å®ç°åŠ è½½çŠ¶æ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æä¾›åŠ è½½åé¦ˆï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"let isLoading = false;\\nconst loadingResources = new Set<string>();\\n\\nregisterResourceLoader(async (config) => {\\n  const {data} = config;\\n\\n  loadingResources.add(data);\\n  updateLoadingState();\\n\\n  try {\\n    const svgString = await fetchFromYourServer(data);\\n    return loadSVGResource(svgString);\\n  } finally {\\n    loadingResources.delete(data);\\n    updateLoadingState();\\n  }\\n});\\n\\nfunction updateLoadingState() {\\n  isLoading = loadingResources.size > 0;\\n  // æ›´æ–° UI æ˜¾ç¤ºåŠ è½½çŠ¶æ€\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"error-degradation\",\"children\":\"4. é”™è¯¯é™çº§ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åŠ è½½å¤±è´¥æ—¶æä¾›åˆç†çš„é™çº§æ–¹æ¡ˆï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  try {\\n    const svgString = await fetchFromYourServer(config.scene, config.data);\\n    return loadSVGResource(svgString);\\n  } catch (error) {\\n    // è®°å½•é”™è¯¯\\n    console.warn(`èµ„æºåŠ è½½å¤±è´¥: ${config.scene}:${config.data}`, error);\\n\\n    // è¿”å›å ä½ç¬¦ SVG\\n    return loadSVGResource(getPlaceholderSVG(config.scene));\\n  }\\n});\\n\\nfunction getPlaceholderSVG(scene?: string): string {\\n  // æ ¹æ®èµ„æºåœºæ™¯è¿”å›ä¸åŒçš„å ä½ç¬¦\\n  if (scene === 'icon') {\\n    return '<svg><!-- icon placeholder --></svg>';\\n  }\\n  if (scene === 'illus') {\\n    return '<svg><!-- illus placeholder --></svg>';\\n  }\\n  return '<svg><!-- default placeholder --></svg>';\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"considerations\",\"children\":\"æ³¨æ„äº‹é¡¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åœ¨ä½¿ç”¨èµ„æºåŠ è½½å™¨æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ä»¥é¿å…å¸¸è§é—®é¢˜ã€‚\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"single-loader\",\"children\":\"1. å•ä¸€åŠ è½½å™¨ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"registerResourceLoader\"}],\" ä¼šè¦†ç›–ä¹‹å‰æ³¨å†Œçš„åŠ è½½å™¨ï¼Œå› æ­¤éœ€è¦åœ¨ä¸€ä¸ªåŠ è½½å™¨ä¸­å¤„ç†æ‰€æœ‰èµ„æºç±»å‹ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// âœ… æ­£ç¡®ï¼šåœ¨ä¸€ä¸ªåŠ è½½å™¨ä¸­å¤„ç†å¤šç§ç±»å‹\\nregisterResourceLoader(async (config) => {\\n  if (config.scene === 'icon') {\\n    return await loadIcon(config.data);\\n  }\\n  if (config.scene === 'illus') {\\n    return await loadIllus(config.data);\\n  }\\n  // è‡ªå®šä¹‰åè®®ç¤ºä¾‹\\n  if (typeof config.data === 'string' && config.data.startsWith('img:')) {\\n    return await loadImageBase64Resource(await fetchImageAsBase64(config.data.slice(4)));\\n  }\\n  return null;\\n});\\n\\n// âŒ é”™è¯¯ï¼šå¤šæ¬¡æ³¨å†Œä¼šè¦†ç›–\\nregisterResourceLoader(loadIcon);\\nregisterResourceLoader(loadIllus); // ä¼šè¦†ç›–ä¸Šé¢çš„ loadIcon\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"async-loading\",\"children\":\"2. å¼‚æ­¥èµ„æºåŠ è½½ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"@antv/infographic\"}],\" ä¼šå¹¶è¡ŒåŠ è½½èµ„æºï¼Œä¸”èµ„æºçš„åŠ è½½ä¸ä¼šé˜»å¡ä¿¡æ¯å›¾æ¸²æŸ“è¿‡ç¨‹ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å½“èµ„æºåŠ è½½é€Ÿåº¦è¾ƒæ…¢æ—¶ï¼Œä¿¡æ¯å›¾ä¸­çš„å›¾æ ‡/æ’å›¾å¯èƒ½ä¼šå»¶è¿Ÿæ˜¾ç¤ºã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const infographic = new Infographic({\\n  // å…¶ä»–é…ç½®é¡¹...\\n});\\n\\ninfographic.render(`\\ndata\\n  items\\n    - icon 1\\n      label æ•°æ®é¡¹ 1\\n    - icon 2\\n      label æ•°æ®é¡¹ 2\\n    - icon 3\\n      label æ•°æ®é¡¹ 3\\n`);\\n\"}]}]]}]]","meta":{"title":"è‡ªå®šä¹‰èµ„æºåŠ è½½å™¨"},"languages":null,"tocEn":"[{\"url\":\"#\",\"text\":\"Overview\",\"depth\":2},{\"url\":\"#simple-example\",\"depth\":2,\"text\":\"Simple Example \"},{\"url\":\"#full-example\",\"depth\":2,\"text\":\"Full Example \"},{\"url\":\"#helper-functions\",\"depth\":2,\"text\":\"Helper Functions \"},{\"url\":\"#loadsvgresource---svg-conversion\",\"depth\":3,\"text\":\"loadSVGResource() - SVG Conversion \"},{\"url\":\"#loadimagebase64resource---image-conversion\",\"depth\":3,\"text\":\"loadImageBase64Resource() - Image Conversion \"},{\"url\":\"#loadremoteresource---remote-loading\",\"depth\":3,\"text\":\"loadRemoteResource() - Remote Loading \"},{\"url\":\"#advanced-usage\",\"depth\":2,\"text\":\"Advanced Usage \"},{\"url\":\"#cache-optimization\",\"depth\":3,\"text\":\"Cache Optimization \"},{\"url\":\"#error-handling\",\"depth\":3,\"text\":\"Error Handling \"},{\"url\":\"#multiple-formats\",\"depth\":3,\"text\":\"Supporting Multiple Formats \"},{\"url\":\"#preload-resources\",\"depth\":3,\"text\":\"Preloading Resources \"},{\"url\":\"#best-practices\",\"depth\":2,\"text\":\"Best Practices \"},{\"url\":\"#meaningful-resource-identifiers\",\"depth\":3,\"text\":\"1. Use Clear Resource Identifiers \"},{\"url\":\"#uniform-resource-protocol\",\"depth\":3,\"text\":\"2. Keep a Unified Protocol \"},{\"url\":\"#loading-state\",\"depth\":3,\"text\":\"3. Track Loading States \"},{\"url\":\"#error-degradation\",\"depth\":3,\"text\":\"4. Gracefully Degrade on Failure \"},{\"url\":\"#considerations\",\"depth\":2,\"text\":\"Considerations \"},{\"url\":\"#single-loader\",\"depth\":3,\"text\":\"1. Single Loader Instance \"},{\"url\":\"#async-loading\",\"depth\":3,\"text\":\"2. Asynchronous Loading \"}]","contentEn":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"Note\",null,{\"children\":[\"If you are not familiar with resources, start with the \",[\"$r\",\"a\",null,{\"href\":\"/learn/resources\",\"children\":\"Resources\"}],\" section.\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"When the built-in protocols are not enough for your resource sources, register a custom resource loader to extend how icons, illustrations, and other assets are fetched.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Implementation is straightforward:\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Register a loader via \",[\"$r\",\"code\",null,{\"children\":\"registerResourceLoader\"}],\".\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"Parse the protocol and fetch the resource inside the loader function.\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"Return a standard resource object through helper functions (such as \",[\"$r\",\"code\",null,{\"children\":\"loadSVGResource\"}],\").\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"@antv/infographic\"}],\" also provides helpers like \",[\"$r\",\"code\",null,{\"children\":\"loadSVGResource\"}],\" to convert fetched content into the format the framework understands.\"]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"simple-example\",\"children\":\"Simple Example \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Below is a simple example that loads icons from \",[\"$r\",\"a\",null,{\"href\":\"https://iconify.design/\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Iconify\"}],\" and illustrations from the \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/balazser/undraw-svg-collection\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"balazser/undraw-svg-collection\"}],\" GitHub repository:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import {registerResourceLoader, loadSVGResource} from '@antv/infographic';\\n\\n// Register the resource loader\\nregisterResourceLoader(async (config) => {\\n  const {scene = 'icon', data} = config; // scene distinguishes icon / illustration\\n\\n  // Parse the resource ID (feel free to design your own protocol; here we assume data is the ID)\\n  let url;\\n\\n  if (scene === 'icon') {\\n    url = `https://api.iconify.design/${data}.svg`;\\n  } else {\\n    url = `https://raw.githubusercontent.com/balazser/undraw-svg-collection/refs/heads/main/svgs/${data}.svg`;\\n  }\\n\\n  // Fetch the resource\\n  const response = await fetch(url);\\n  const svgString = await response.text();\\n\\n  // Convert to a framework-friendly resource object\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":\"Due to CORS restrictions, ensure the target server returns proper cross-origin headers.\"}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"full-example\",\"children\":\"Full Example \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Here is a complete example of a custom loader:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {\\n  registerResourceLoader,\\n  loadSVGResource,\\n  Infographic,\\n} from '@antv/infographic';\\n\\n// Function that fetches resources from your own server\\nasync function fetchFromYourServer(scene: string, id: string): Promise<string> {\\n  const response = await fetch(\\n    `https://your-api.com/assets?type=${scene}&id=${id}`\\n  );\\n  return await response.text();\\n}\\n\\n// Register the loader\\nregisterResourceLoader(async (config) => {\\n  const {data, scene = 'icon'} = config;\\n\\n  // Parse the resource ID (here data is the ID; you can extend the protocol)\\n  const id = data;\\n\\n  // Load from your server\\n  const svgString = await fetchFromYourServer(scene, id);\\n\\n  // Convert to SVG resource object\\n  return loadSVGResource(svgString);\\n});\\n\\n// Usage\\nconst infographic = new Infographic({\\n  // other configuration...\\n});\\n\\ninfographic.render(`\\ndata\\n  items\\n    - icon star # Use the custom protocol with scene=icon\\n      label Feature 1\\n      desc Using the custom resource loader\\n      illus chart-growth # Use the custom protocol with scene=illus\\n`);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"helper-functions\",\"children\":\"Helper Functions \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"The framework exposes helpers that simplify handling different resource formats inside your loader.\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadsvgresource---svg-conversion\",\"children\":\"loadSVGResource() - SVG Conversion \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"The most commonly used helper, it converts an SVG string into a usable resource object.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Basic usage\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadSVGResource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  const svgString = await fetch(`/api/icons/${config.data}`).then((r) =>\\n    r.text()\\n  );\\n\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Handling different SVG formats\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// Supports <svg> tags\\nconst svg1 = '<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">...</svg>';\\nloadSVGResource(svg1); // âœ… auto-converted\\n\\n// Supports <symbol> tags\\nconst svg2 = '<symbol id=\\\"icon-star\\\">...</symbol>';\\nloadSVGResource(svg2); // âœ… usable as-is\\n\\n// Handling possible parsing failures\\nconst resource = loadSVGResource(svgString);\\nif (!resource) {\\n  console.error('SVG parsing failed');\\n}\\n\"}]}],\"\\n\",[\"$r\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ğŸ’¡ \",[\"$r\",\"strong\",null,{\"children\":\"Tip\"}],\": For full API details, see \",[\"$r\",\"a\",null,{\"href\":\"/learn/resources\",\"children\":\"Core Concepts - Resources\"}]]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadimagebase64resource---image-conversion\",\"children\":\"loadImageBase64Resource() - Image Conversion \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Use this helper to load Base64-encoded images (PNG, JPEG, GIF, etc.) and convert them into SVG resources.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Basic usage\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadImageBase64Resource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  if (config.data.startsWith('img:')) {\\n    const base64 = await fetchImageAsBase64(config.data);\\n\\n    return await loadImageBase64Resource(base64);\\n  }\\n\\n  // handle other cases...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Typical scenario\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  if (config.type === 'image') {\\n    return await loadImageBase64Resource(config.data);\\n  }\\n\\n  const svgString = await fetchFromServer(config.data);\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"âš ï¸ \",[\"$r\",\"strong\",null,{\"children\":\"Note\"}],\": This helper returns a promise, so remember to \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loadremoteresource---remote-loading\",\"children\":\"loadRemoteResource() - Remote Loading \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Load SVG resources from a remote URL. It is commonly used internally but is also available for custom workflows.\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Basic usage\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {loadRemoteResource} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  if (typeof config.data === 'string' && (config.data.startsWith('http://') || config.data.startsWith('https://'))) {\\n    return await loadRemoteResource(config.data);\\n  }\\n\\n  // handle other protocols...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"Combine with caching\"}],\":\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const cache = new Map<string, Resource>();\\n\\nregisterResourceLoader(async (config) => {\\n  const url = config.data;\\n\\n  if (cache.has(url)) {\\n    return cache.get(url)!;\\n  }\\n\\n  const resource = await loadRemoteResource(url);\\n\\n  if (resource) {\\n    cache.set(url, resource);\\n  }\\n\\n  return resource;\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"advanced-usage\",\"children\":\"Advanced Usage \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"cache-optimization\",\"children\":\"Cache Optimization \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Cache resources to improve performance:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const resourceCache = new Map<string, string>();\\n\\nregisterResourceLoader(async (config) => {\\n  const {data, scene} = config;\\n  const key = `${scene || 'default'}:${data}`;\\n\\n  if (resourceCache.has(key)) {\\n    return loadSVGResource(resourceCache.get(key)!);\\n  }\\n\\n  const svgString = await fetchFromYourServer(scene, data);\\n  resourceCache.set(key, svgString);\\n\\n  return loadSVGResource(svgString);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"error-handling\",\"children\":\"Error Handling \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Return a fallback resource when loading fails:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  try {\\n    const svgString = await fetchFromYourServer(config.data);\\n    return loadSVGResource(svgString);\\n  } catch (error) {\\n    console.error('Resource loading failed:', error);\\n\\n    const fallbackSVG = '<svg>...</svg>';\\n    return loadSVGResource(fallbackSVG);\\n  }\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"multiple-formats\",\"children\":\"Supporting Multiple Formats \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Branch logic based on the resource format:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {\\n  registerResourceLoader,\\n  loadSVGResource,\\n  loadImageBase64Resource,\\n} from '@antv/infographic';\\n\\nregisterResourceLoader(async (config) => {\\n  const {data, scene = 'icon', format} = config;\\n\\n  if (typeof data === 'string' && data.startsWith('img:')) {\\n    const resourceId = data.slice(4);\\n    const imageBase64 = await fetchImageAsBase64(resourceId);\\n    return loadImageBase64Resource(imageBase64);\\n  }\\n\\n  const svg =\\n    scene === 'illus'\\n      ? await fetchIllustration(data)\\n      : await fetchIcon(data, format);\\n  return loadSVGResource(svg);\\n});\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preload-resources\",\"children\":\"Preloading Resources \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Preload every resource before rendering:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import {Infographic} from '@antv/infographic';\\n\\nfunction extractResourceEntries(data: Data): Array<{scene: 'icon' | 'illus'; id: string}> {\\n  const entries: Array<{scene: 'icon' | 'illus'; id: string}> = [];\\n\\n  data.items.forEach((item) => {\\n    if (item.icon) entries.push({scene: 'icon', id: item.icon as string});\\n    if (item.illus) entries.push({scene: 'illus', id: item.illus as string});\\n  });\\n\\n  return entries;\\n}\\n\\nasync function preloadResources(data: Data) {\\n  const entries = extractResourceEntries(data);\\n  await Promise.all(entries.map(({scene, id}) => fetchFromYourServer(scene, id)));\\n}\\n\\nconst data = {\\n  items: [\\n    {icon: '1', /** ... */},\\n    {icon: '2', /** ... */},\\n    {icon: '3', /** ... */},\\n  ],\\n};\\n\\nawait preloadResources(data);\\n\\nconst infographic = new Infographic({\\n  // other configuration...\\n});\\n\\ninfographic.render(`\\ninfographic list-row-horizontal-icon-arrow\\ndata\\n  title Preload Example\\n  items\\n    - icon 1\\n      label Data 1\\n    - icon 2\\n      label Data 2\\n    - icon 3\\n      label Data 3\\n`);\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"best-practices\",\"children\":\"Best Practices \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"meaningful-resource-identifiers\",\"children\":\"1. Use Clear Resource Identifiers \"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"// Recommended: readable names\\nicon: 'user-profile';\\nicon: 'chart-bar';\\nillus: 'dashboard-overview';\\n\\n// Not recommended: obscure IDs\\nicon: 'res001';\\nicon: 'abc123';\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"uniform-resource-protocol\",\"children\":\"2. Keep a Unified Protocol \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Use a consistent protocol across your project:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"icon: 'ref:remote:https://example.com/star.svg';\\nillus: 'chart-1';\\n\\n// Or use object payloads\\nicon: { source: 'remote', format: 'svg', data: 'https://example.com/star.svg' };\\nillus: { source: 'inline', format: 'svg', data: '<svg>...</svg>' };\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"loading-state\",\"children\":\"3. Track Loading States \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Provide user feedback while resources are loading:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"let isLoading = false;\\nconst loadingResources = new Set<string>();\\n\\nregisterResourceLoader(async (config) => {\\n  const {data} = config;\\n  loadingResources.add(data);\\n  updateLoadingState();\\n\\n  try {\\n    const svgString = await fetchFromYourServer(data);\\n    return loadSVGResource(svgString);\\n  } finally {\\n    loadingResources.delete(data);\\n    updateLoadingState();\\n  }\\n});\\n\\nfunction updateLoadingState() {\\n  isLoading = loadingResources.size > 0;\\n  // Update your UI to reflect the loading status\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"error-degradation\",\"children\":\"4. Gracefully Degrade on Failure \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Fallback to placeholders when loading fails:\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  try {\\n    const svgString = await fetchFromYourServer(config.scene, config.data);\\n    return loadSVGResource(svgString);\\n  } catch (error) {\\n    console.warn(`Resource load failed: ${config.scene}:${config.data}`, error);\\n    return loadSVGResource(getPlaceholderSVG(config.scene));\\n  }\\n});\\n\\nfunction getPlaceholderSVG(scene?: string): string {\\n  if (scene === 'icon') {\\n    return '<svg><!-- icon placeholder --></svg>';\\n  }\\n  if (scene === 'illus') {\\n    return '<svg><!-- illustration placeholder --></svg>';\\n  }\\n  return '<svg><!-- default placeholder --></svg>';\\n}\\n\"}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"considerations\",\"children\":\"Considerations \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"When using a resource loader, keep the following in mind to avoid common pitfalls.\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"single-loader\",\"children\":\"1. Single Loader Instance \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"registerResourceLoader\"}],\" replaces the previous loader, so handle all resource types within one registration:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"registerResourceLoader(async (config) => {\\n  if (config.scene === 'icon') {\\n    return await loadIcon(config.data);\\n  }\\n  if (config.scene === 'illus') {\\n    return await loadIllus(config.data);\\n  }\\n  if (typeof config.data === 'string' && config.data.startsWith('img:')) {\\n    return await loadImageBase64Resource(await fetchImageAsBase64(config.data.slice(4)));\\n  }\\n  return null;\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Avoid registering multiple loaders, which would override the previous ones.\"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"async-loading\",\"children\":\"2. Asynchronous Loading \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"@antv/infographic\"}],\" loads resources in parallel, and resource fetching does not block rendering. Slow resources may appear with a delay inside the infographic.\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"const infographic = new Infographic({\\n  // other configuration...\\n});\\n\\ninfographic.render(`\\ndata\\n  items\\n    - icon 1\\n      label Data 1\\n    - icon 2\\n      label Data 2\\n    - icon 3\\n      label Data 3\\n`);\\n\"}]}]]}]]","metaEn":{"title":"Custom Resource Loader"}},"__N_SSG":true}