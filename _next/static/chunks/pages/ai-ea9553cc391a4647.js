(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[474],{5596:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ai",function(){return t(6952)}])},6374:(e,r,t)=>{"use strict";t.d(r,{o:()=>i});var a=t(7876),n=t(7964);let i=(0,t(4232).memo)(function(e){let r,t,i=(0,n.c)(3),{className:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("path",{d:"M24 9L18.343 14.657L16.929 13.243L21.172 9L16.929 4.757L18.343 3.343L24 9ZM2.828 9L7.071 13.243L5.657 14.657L0 9L5.657 3.343L7.07 4.757L2.828 9ZM9.788 18H7.66L14.212 0H16.34L9.788 18Z",fill:"currentColor"}),i[0]=r):r=i[0],i[1]!==l?(t=(0,a.jsx)("svg",{className:l,width:"1.33em",height:"1em",viewBox:"0 0 24 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r}),i[1]=l,i[2]=t):t=i[2],t})},6805:(e,r,t)=>{"use strict";t.d(r,{i:()=>d,z:()=>p});var a=t(7876),n=t(7964),i=t(5039),l=t.n(i),o=t(5922),s=t(5784),c=t(4232);function d(e){let r,t,a,i,l,o=(0,n.c)(8),s=void 0===e?1500:e,[d,p]=(0,c.useState)(null),u=(0,c.useRef)(null);o[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{u.current&&(clearTimeout(u.current),u.current=null),p(null)},o[0]=r):r=o[0];let m=r;o[1]!==s?(t=e=>{u.current&&clearTimeout(u.current),p(e),u.current=setTimeout(()=>p(null),s)},o[1]=s,o[2]=t):t=o[2];let h=t;return o[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{u.current&&clearTimeout(u.current)},i=[],o[3]=a,o[4]=i):(a=o[3],i=o[4]),(0,c.useEffect)(a,i),o[5]!==d||o[6]!==h?(l={message:d,show:h,clear:m},o[5]=d,o[6]=h,o[7]=l):l=o[7],l}function p(e){let r,t,i=(0,n.c)(5),{message:c,className:d}=e;return i[0]!==d||i[1]!==c?(r=c?(0,a.jsxs)(o.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:12},transition:{duration:.25},className:l()("fixed bottom-8 right-8 z-[2000] rounded-full bg-link dark:bg-link-dark text-white px-5 py-2.5 shadow-lg font-medium text-sm",d),children:["✓ ",c]}):null,i[0]=d,i[1]=c,i[2]=r):r=i[2],i[3]!==r?(t=(0,a.jsx)(s.N,{children:r}),i[3]=r,i[4]=t):t=i[4],t}},6952:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ea});var a=t(7876),n=t(7964),i=t(6805),l=t(5035),o=t(766),s=t(5922),c=t(9099),d=t(4232),p=t(2129),u=t(4272),m=t(3212),h=t(2638);let g={"zh-CN":{historyTitle:"生成记录",configure:"配置服务",clear:"清空对话",shortcut:"⌘/Ctrl + ↵",emptyTitle:"开始你的创作",emptyDescription:"还没有生成记录，使用下方示例或粘贴你的内容开始。",retry:"重试",deleteAria:"删除记录",placeholder:"提供你的数据，我会帮你生成信息图",helper:"明确图表类型、数据来源、配色/风格，会生成得更准",send:"生成信息图",sending:"生成中...",apiKeyError:"生成失败，请检查 API Key 或网络连接"},"en-US":{historyTitle:"Generation History",configure:"Configure Service",clear:"Clear Conversation",shortcut:"⌘/Ctrl + ↵",emptyTitle:"Start creating",emptyDescription:"No generations yet. Use the examples below or paste your content to get started.",retry:"Retry",deleteAria:"Delete record",placeholder:"Provide your data and I will create an infographic for you",helper:"Specify chart types, data sources, and palette/style to get better results",send:"Generate",sending:"Generating...",apiKeyError:"Generation failed, please check your API key or network connection"}};function x(e){let r,t,i,l,o,c,u,x,f,y,b,v,k,w,j,N,S,C,I,A,_,L,z,P,q,E,O,T,U,K,M=(0,n.c)(88),{prompt:B,onPromptChange:R,onSend:D,isGenerating:H,textareaRef:F,history:G,onSelectHistory:V,onRetry:W,onDelete:J,onOpenConfig:$,onClear:Z,examples:X,panelClassName:Q}=e,Y=(0,d.useRef)(null),[ee,er]=(0,d.useState)(null),et=(0,p.K)(g);M[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{Y.current&&(Y.current.scrollTop=Y.current.scrollHeight)},M[0]=r):r=M[0],M[1]!==G.length?(t=[G.length],M[1]=G.length,M[2]=t):t=M[2],(0,d.useEffect)(r,t),M[3]!==V?(i=(e,r,t,a)=>{er(r=>r===e?null:e),!a&&(r||t)&&V(r,t)},M[3]=V,M[4]=i):i=M[4];let ea=i;M[5]===Symbol.for("react.memo_cache_sentinel")?(l={opacity:0,y:24},o={opacity:1,y:0},c={duration:.45,ease:"easeOut"},M[5]=l,M[6]=o,M[7]=c):(l=M[5],o=M[6],c=M[7]);let en="rounded-2xl border border-border dark:border-border-dark bg-card dark:bg-card-dark shadow-nav dark:shadow-nav-dark p-5 lg:p-6 flex flex-col overflow-visible ".concat(void 0===Q?"min-h-[520px] h-[640px] max-h-[75vh]":Q);if(M[8]!==et.historyTitle?(u=(0,a.jsx)("p",{className:"text-base font-semibold text-primary dark:text-primary-dark",children:et.historyTitle}),M[8]=et.historyTitle,M[9]=u):u=M[9],M[10]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsxs)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),M[10]=x):x=M[10],M[11]!==et.configure||M[12]!==$?(f=(0,a.jsxs)("button",{type:"button",onClick:$,className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full border border-border dark:border-border-dark bg-wash dark:bg-wash-dark text-xs font-medium text-primary dark:text-primary-dark hover:border-link hover:text-link dark:hover:border-link-dark dark:hover:text-link-dark transition-colors",children:[x,et.configure]}),M[11]=et.configure,M[12]=$,M[13]=f):f=M[13],M[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,a.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),M[14]=y):y=M[14],M[15]!==et.clear||M[16]!==Z?(b=(0,a.jsxs)("button",{type:"button",onClick:Z,className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full border border-border dark:border-border-dark bg-wash dark:bg-wash-dark text-xs font-medium text-primary dark:text-primary-dark hover:border-link hover:text-link dark:hover:border-link-dark dark:hover:text-link-dark transition-colors",children:[y,et.clear]}),M[15]=et.clear,M[16]=Z,M[17]=b):b=M[17],M[18]!==et.shortcut?(v=(0,a.jsx)("span",{className:"text-xs text-tertiary dark:text-tertiary-dark bg-wash dark:bg-wash-dark px-3 py-1 rounded-full font-medium",children:et.shortcut}),M[18]=et.shortcut,M[19]=v):v=M[19],M[20]!==f||M[21]!==b||M[22]!==v?(k=(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[f,b,v]}),M[20]=f,M[21]=b,M[22]=v,M[23]=k):k=M[23],M[24]!==k||M[25]!==u?(w=(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between mb-4",children:[u,k]}),M[24]=k,M[25]=u,M[26]=w):w=M[26],M[27]!==et.apiKeyError||M[28]!==et.deleteAria||M[29]!==et.emptyDescription||M[30]!==et.emptyTitle||M[31]!==et.retry||M[32]!==ee||M[33]!==ea||M[34]!==G||M[35]!==H||M[36]!==J||M[37]!==W?(j=(0,a.jsx)("div",{ref:Y,className:"flex-1 overflow-y-auto pr-1 py-1 mb-4 scrollbar-thin scrollbar-thumb-gray-20 dark:scrollbar-thumb-gray-60 scrollbar-track-transparent",children:0===G.length?(0,a.jsx)("div",{className:"rounded-xl border border-dashed border-gray-20 dark:border-gray-60 bg-gradient-to-br from-gray-5 to-transparent dark:from-gray-80 dark:to-transparent p-6 text-sm text-secondary dark:text-secondary-dark",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg bg-gradient-to-br from-link/10 to-link/5 dark:from-link-dark/10 dark:to-link-dark/5 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-link dark:text-link-dark",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-primary dark:text-primary-dark mb-1.5 text-base",children:et.emptyTitle}),(0,a.jsx)("p",{className:"text-sm leading-relaxed",children:et.emptyDescription})]})]})}):(0,a.jsx)("div",{className:"space-y-4 pr-1",children:G.map(e=>{let r="error"===e.status,t=H&&"pending"!==e.status||"pending"===e.status||!e.syntax&&!e.config&&!r,n="error"===e.status,i=ee===e.id,l=e.error||et.apiKeyError,o=()=>{r||t||ea(e.id,e.syntax,e.config,t)};return(0,a.jsx)("div",{role:"button",tabIndex:t||r?-1:0,"aria-disabled":t||r,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||t||(e.preventDefault(),o())},onClick:o,className:"group relative w-full rounded-2xl border text-left transition-all duration-300 ease-out ".concat(n?"px-3 py-3":"px-4 py-4"," ").concat(t||r?"border-border dark:border-border-dark bg-card dark:bg-card-dark opacity-60 cursor-not-allowed":i?"border-link/70 dark:border-link-dark/60 bg-wash dark:bg-wash-dark shadow-[0_18px_45px_-30px_rgba(22,35,70,0.32),0_12px_32px_-22px_rgba(77,116,202,0.55),0_0_0_1px_rgba(255,255,255,0.35)] dark:shadow-[0_18px_48px_-30px_rgba(0,0,0,0.55),0_12px_32px_-22px_rgba(120,150,220,0.5),0_0_0_1px_rgba(255,255,255,0.06)] -translate-y-0.5 cursor-pointer":"border-border dark:border-border-dark bg-wash dark:bg-wash-dark hover:border-link/40 dark:hover:border-link-dark/50 cursor-pointer"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"overflow-hidden transition-[max-height] duration-200 ease-in-out ".concat(i?"max-h-[260px]":"max-h-[24px]"),children:(0,a.jsx)("p",{className:"text-[13px] leading-relaxed text-secondary dark:text-secondary-dark ".concat(i?"":"line-clamp-1"),children:e.text})})}),(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2 self-center",children:["pending"===e.status&&(0,a.jsxs)("svg",{className:"w-4 h-4 text-tertiary dark:text-tertiary-dark animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"3"}),(0,a.jsx)("path",{className:"opacity-80",fill:"currentColor",d:"M12 3a9 9 0 00-9 9h3a6 6 0 016-6V3z"})]}),n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),W(e.id,e.text)},type:"button",className:"inline-flex items-center justify-center h-7 px-2 text-[11px] font-semibold text-red-500 dark:text-red-400 hover:underline",children:et.retry}),(0,a.jsx)(m.A,{placement:"topRight",mouseEnterDelay:.15,title:(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words text-xs leading-relaxed max-w-xs",children:l}),children:(0,a.jsx)("span",{className:"inline-flex",children:(0,a.jsx)(h.k,{className:"w-4 h-4 text-red-500 dark:text-red-400"})})}),(0,a.jsx)("button",{onClick:r=>{r.stopPropagation(),J(e.id)},type:"button","aria-label":et.deleteAria,className:"inline-flex items-center justify-center h-8 w-8 text-tertiary dark:text-tertiary-dark hover:text-primary dark:hover:text-primary-dark transition-colors",children:(0,a.jsxs)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M6 6l12 12"}),(0,a.jsx)("path",{d:"M6 18L18 6"})]})})]}):!t&&(0,a.jsx)("svg",{className:"w-4 h-4 text-link dark:text-link-dark transition-all duration-200 group-hover:translate-x-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},e.id)})})}),M[27]=et.apiKeyError,M[28]=et.deleteAria,M[29]=et.emptyDescription,M[30]=et.emptyTitle,M[31]=et.retry,M[32]=ee,M[33]=ea,M[34]=G,M[35]=H,M[36]=J,M[37]=W,M[38]=j):j=M[38],M[39]!==X||M[40]!==R||M[41]!==F.current){let e;M[43]!==R||M[44]!==F.current?(e=e=>(0,a.jsx)("button",{onClick:()=>{var r;R(e.text),null==(r=F.current)||r.focus()},className:"group text-left rounded-lg border border-border dark:border-border-dark bg-wash dark:bg-wash-dark px-3.5 py-3 hover:border-link dark:hover:border-link-dark hover:bg-gradient-to-br hover:from-link/5 hover:to-transparent dark:hover:from-link-dark/5 dark:hover:to-transparent transition-all duration-200 hover:shadow-sm active:scale-[0.98]",children:(0,a.jsx)("div",{className:"flex items-start gap-2",children:(0,a.jsx)("span",{className:"text-[13px] leading-relaxed line-clamp-2 group-hover:line-clamp-3 transition-all duration-200",children:e.title})})},e.title),M[43]=R,M[44]=F.current,M[45]=e):e=M[45],N=X.map(e),M[39]=X,M[40]=R,M[41]=F.current,M[42]=N}else N=M[42];return M[46]!==N?(S=(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:N}),M[46]=N,M[47]=S):S=M[47],M[48]!==R?(C=e=>R(e.target.value),M[48]=R,M[49]=C):C=M[49],M[50]!==D?(I=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),D())},M[50]=D,M[51]=I):I=M[51],M[52]!==et.placeholder||M[53]!==B||M[54]!==C||M[55]!==I||M[56]!==F?(A=(0,a.jsx)("textarea",{ref:F,value:B,onChange:C,onKeyDown:I,rows:4,placeholder:et.placeholder,className:"w-full bg-transparent outline-none resize-none text-[15px] leading-relaxed text-primary dark:text-primary-dark placeholder:text-tertiary dark:placeholder:text-tertiary-dark py-3.5 px-4"}),M[52]=et.placeholder,M[53]=B,M[54]=C,M[55]=I,M[56]=F,M[57]=A):A=M[57],M[58]===Symbol.for("react.memo_cache_sentinel")?(_=(0,a.jsx)("svg",{className:"w-3.5 h-3.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),M[58]=_):_=M[58],M[59]!==et.helper?(L=(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-tertiary dark:text-tertiary-dark sm:max-w-[65%]",children:[_,(0,a.jsx)("span",{className:"leading-tight select-none",children:et.helper})]}),M[59]=et.helper,M[60]=L):L=M[60],M[61]!==D?(z=()=>D(),M[61]=D,M[62]=z):z=M[62],M[63]!==H||M[64]!==B?(P=H||!B.trim(),M[63]=H,M[64]=B,M[65]=P):P=M[65],M[66]!==et.send||M[67]!==et.sending||M[68]!==H?(q=H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),et.sending]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),et.send]}),M[66]=et.send,M[67]=et.sending,M[68]=H,M[69]=q):q=M[69],M[70]!==z||M[71]!==P||M[72]!==q?(E=(0,a.jsx)("button",{onClick:z,disabled:P,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-gradient-to-r from-link to-link/90 dark:from-link-dark dark:to-link-dark/90 text-white hover:from-link/90 hover:to-link/80 dark:hover:from-link-dark/90 dark:hover:to-link-dark/80 text-[13px] font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-link/25 dark:shadow-link-dark/25 active:scale-[.97] transition-all duration-200 disabled:active:scale-100 w-full sm:w-auto justify-center whitespace-nowrap",children:q}),M[70]=z,M[71]=P,M[72]=q,M[73]=E):E=M[73],M[74]!==L||M[75]!==E?(O=(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between px-4 pb-3.5 pt-0",children:[L,E]}),M[74]=L,M[75]=E,M[76]=O):O=M[76],M[77]!==A||M[78]!==O?(T=(0,a.jsxs)("div",{className:"relative rounded-xl border border-border dark:border-border-dark bg-card dark:bg-card-dark focus-within:ring-2 focus-within:ring-link/30 dark:focus-within:ring-link-dark/30 focus-within:border-link dark:focus-within:border-link-dark transition-all shadow-sm overflow-hidden",children:[A,O]}),M[77]=A,M[78]=O,M[79]=T):T=M[79],M[80]!==S||M[81]!==T?(U=(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[S,T]}),M[80]=S,M[81]=T,M[82]=U):U=M[82],M[83]!==w||M[84]!==j||M[85]!==U||M[86]!==en?(K=(0,a.jsxs)(s.P.div,{layout:!0,initial:l,animate:o,transition:c,className:en,children:[w,j,U]}),M[83]=w,M[84]=j,M[85]=U,M[86]=en,M[87]=K):K=M[87],K}var f=t(1852),y=t(7132),b=t(4587),v=t.n(b);let k={config:"ai-demo-config",messages:"ai-demo-messages",infographic:"ai-demo-infographic"},w={provider:"antv",baseUrl:"",model:"",apiKey:""},j=[{value:"antv",label:"AntV",baseUrl:"",logo:"/images/antv.svg"},{value:"openai",label:"OpenAI",baseUrl:"https://api.openai.com/v1",logo:"/images/openai.svg"},{value:"anthropic",label:"Anthropic",baseUrl:"https://api.anthropic.com/v1",logo:"/images/claude.svg"},{value:"google",label:"Google",baseUrl:"https://generativelanguage.googleapis.com/v1",logo:"/images/gemini.svg"},{value:"xai",label:"xAI",baseUrl:"https://api.x.ai/v1",logo:"/images/xai.svg"},{value:"deepseek",label:"DeepSeek",baseUrl:"https://api.deepseek.com/v1",logo:"/images/deepseek.svg"},{value:"qwen",label:"Qwen",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",logo:"/images/qwen.svg"}];function N(e){try{return JSON.stringify(e,null,2)}catch(e){return""}}let S=e=>{var r,t;return String.fromCharCode(...(null!=(t=null==(r=e.match(/\d{3}/g))?void 0:r.map(Number))?t:[]).map((e,r)=>e^17+r%5))},C="# 信息图语法生成规范\n\n本文件用于指导生成符合 AntV Infographic 语法规范的纯文本输出。\n\n## 目录\n\n- 目标与输入输出\n- 语法结构\n- 语法规范\n- 模板选择\n- 生成流程\n- 输出格式\n- 常见问题与最佳实践\n\n## 目标与输入输出\n\n- **输入**：用户的文字内容或需求描述\n- **输出**：仅包含 Infographic 语法的 `plain` 代码块\n\n## 语法结构\n\n信息图语法由入口与块结构组成：\n\n- **入口**：`infographic <template-name>`\n- **块**：`data` / `theme`\n  - 块内层级使用两个空格缩进\n\n## 规范\n\n### AntV Infographic 语法\n\nAntV Infographic 语法是一种自定义的 DSL，用于描述信息图渲染配置。它使用缩进描述信息，具有较强鲁棒性，便于 AI 流式输出并渲染信息图。主要包含以下信息：\n\n1. template：用模板表达文字信息结构。\n2. data：信息图数据，包含 title、desc、数据项等。数据项通常包含 label、desc、icon 等字段。\n3. theme：主题包含 palette、font 等样式配置。\n\n例如：\n\n```plain\ninfographic list-row-horizontal-icon-arrow\ndata\n  title Title\n  desc Description\n  lists\n    - label Label\n      value 12.5\n      desc Explanation\n      icon document text\ntheme\n  palette #3b82f6 #8b5cf6 #f97316\n```\n\n### 语法规范\n\n- 第一行必须是 `infographic <template-name>`，模板从下方列表中选择（见“可用模板”部分）。\n- 使用 `data` / `theme` 块，块内用两个空格缩进。\n- 键值对使用「键 空格 值」；数组使用 `-` 作为条目前缀。\n- icon 使用图标关键词（如 `star fill`）。\n- `data` 应包含 title/desc + 模板对应的主数据字段（不一定是 `items`）。\n- 主数据字段选择（只用一个，避免混用）：\n  - `list-*` → `lists`\n  - `sequence-*` → `sequences`（可选 `order asc|desc`）\n  - `compare-*` → `compares`（支持 `children` 分组对比），可包含多个对比项\n  - `hierarchy-structure` → `items`（每一项对应一个独立层级，每一层级可以包含子项，最多可嵌套 3 层）\n  - `hierarchy-*` → 单一 `root`（树结构，通过 `children` 嵌套）；\n  - `relation-*` → `nodes` + `relations`；简单关系图可省略 `nodes`，在 relations 中用箭头语法\n  - `chart-*` → `values`（数值统计，可选 `category`）\n  - 不确定时再用 `items` 兜底\n- `compare-binary-*` / `compare-hierarchy-left-right-*` 二元模板：必须两个根节点，所有对比项挂在这两个根节点的 children\n- `hierarchy-*`：使用单一 `root`，通过 `children` 嵌套（不要重复 `root`）\n- `theme` 用于自定义主题（palette、font 等）\n  例如：暗色主题 + 自定义配色\n  ```plain\n  infographic list-row-simple-horizontal-arrow\n  theme dark\n    palette\n      - #61DDAA\n      - #F6BD16\n      - #F08BB4\n  ```\n- 使用 `theme.base.text.font-family` 指定字体，如手写风格 `851tegakizatsu`\n- 使用 `theme.stylize` 选择内置风格并传参\n  常见风格：\n  - `rough`：手绘效果\n  - `pattern`：图案填充\n  - `linear-gradient` / `radial-gradient`：线性/径向渐变\n\n  例如：手绘风格（rough）\n\n  ```plain\n  infographic list-row-simple-horizontal-arrow\n  theme\n    stylize rough\n    base\n      text\n        font-family 851tegakizatsu\n  ```\n\n- 禁止输出 JSON、Markdown 或解释性文字\n\n### 数据语法示例\n\n按模板类别的数据语法示例（使用对应字段，避免同时添加 `items`）：\n\n- `list-*` 模版\n\n```plain\ninfographic list-grid-badge-card\ndata\n  title Feature List\n  lists\n    - label Fast\n      icon flash fast\n    - label Secure\n      icon secure shield check\n```\n\n- `sequence-*` 模版\n\n```plain\ninfographic sequence-steps-simple\ndata\n  sequences\n    - label Step 1\n    - label Step 2\n    - label Step 3\n  order asc\n```\n\n- `hierarchy-*` 模版\n\n```plain\ninfographic hierarchy-structure\ndata\n  root\n    label Company\n    children\n      - label Dept A\n      - label Dept B\n```\n\n- `compare-*` 模版\n\n```plain\ninfographic compare-swot\ndata\n  compares\n    - label Strengths\n      children\n        - label Strong brand\n        - label Loyal users\n    - label Weaknesses\n      children\n        - label High cost\n        - label Slow release\n```\n\n四象限图\n\n```plain\ninfographic compare-quadrant-quarter-simple-card\ndata\n  compares\n    - label High Impact & Low Effort\n    - label High Impact & High Effort\n    - label Low Impact & Low Effort\n    - label Low Impact & High Effort\n```\n\n- `chart-*` 模版\n\n```plain\ninfographic chart-column-simple\ndata\n  values\n    - label Visits\n      value 1280\n    - label Conversion\n      value 12.4\n```\n\n- `relation-*` 模版\n\n> 边标签写法：A -label-> B 或 A --\x3e|label| B\n\n```plain\ninfographic relation-dagre-flow-tb-simple-circle-node\ndata\n  nodes\n    - id A\n      label Node A\n    - id B\n      label Node B\n  relations\n    A - approves -> B\n    A --\x3e|blocks| B\n```\n\n- 兜底 `items` 示例\n\n```plain\ninfographic list-row-horizontal-icon-arrow\ndata\n  items\n    - label Item A\n      desc Description\n      icon sun\n    - label Item B\n      desc Description\n      icon moon\n```\n\n### 可用模板\n\n- chart-bar-plain-text\n- chart-column-simple\n- chart-line-plain-text\n- chart-pie-compact-card\n- chart-pie-donut-pill-badge\n- chart-pie-donut-plain-text\n- chart-pie-plain-text\n- chart-wordcloud\n- compare-binary-horizontal-badge-card-arrow\n- compare-binary-horizontal-simple-fold\n- compare-binary-horizontal-underline-text-vs\n- compare-hierarchy-left-right-circle-node-pill-badge\n- compare-quadrant-quarter-circular\n- compare-quadrant-quarter-simple-card\n- compare-swot\n- hierarchy-mindmap-branch-gradient-capsule-item\n- hierarchy-mindmap-level-gradient-compact-card\n- hierarchy-structure\n- hierarchy-tree-curved-line-rounded-rect-node\n- hierarchy-tree-tech-style-badge-card\n- hierarchy-tree-tech-style-capsule-item\n- list-column-done-list\n- list-column-simple-vertical-arrow\n- list-column-vertical-icon-arrow\n- list-grid-badge-card\n- list-grid-candy-card-lite\n- list-grid-ribbon-card\n- list-row-horizontal-icon-arrow\n- list-sector-plain-text\n- list-zigzag-down-compact-card\n- list-zigzag-down-simple\n- list-zigzag-up-compact-card\n- list-zigzag-up-simple\n- relation-dagre-flow-tb-animated-badge-card\n- relation-dagre-flow-tb-animated-simple-circle-node\n- relation-dagre-flow-tb-badge-card\n- relation-dagre-flow-tb-simple-circle-node\n- sequence-ascending-stairs-3d-underline-text\n- sequence-ascending-steps\n- sequence-circular-simple\n- sequence-color-snake-steps-horizontal-icon-line\n- sequence-cylinders-3d-simple\n- sequence-filter-mesh-simple\n- sequence-funnel-simple\n- sequence-horizontal-zigzag-underline-text\n- sequence-mountain-underline-text\n- sequence-pyramid-simple\n- sequence-roadmap-vertical-plain-text\n- sequence-roadmap-vertical-simple\n- sequence-snake-steps-compact-card\n- sequence-snake-steps-simple\n- sequence-snake-steps-underline-text\n- sequence-stairs-front-compact-card\n- sequence-stairs-front-pill-badge\n- sequence-timeline-rounded-rect-node\n- sequence-timeline-simple\n- sequence-zigzag-pucks-3d-simple\n- sequence-zigzag-steps-underline-text\n\n**模板选择建议：**\n\n- 严格顺序（流程/步骤/发展趋势）→ `sequence-*`\n  - 时间线 → `sequence-timeline-*`\n  - 阶梯图 → `sequence-stairs-*`\n  - 路线图 → `sequence-roadmap-vertical-*`\n  - 折线路径 → `sequence-zigzag-*`\n  - 环形进度 → `sequence-circular-simple`\n  - 彩色蛇形步骤 → `sequence-color-snake-steps-*`\n  - 金字塔 → `sequence-pyramid-simple`\n- 观点列举 → `list-row-*` 或 `list-column-*`\n- 二元对比（利弊）→ `compare-binary-*`\n- SWOT → `compare-swot`\n- 层级结构（树图）→ `hierarchy-tree-*`\n- 数据图表 → `chart-*`\n- 象限分析 → `quadrant-*`\n- 网格列表（要点）→ `list-grid-*`\n- 关系展示 → `relation-*`\n- 词云 → `chart-wordcloud`\n- 思维导图 → `hierarchy-mindmap-*`\n\n### 示例\n\n绘制互联网技术演进信息图\n\n```plain\ninfographic list-row-horizontal-icon-arrow\ndata\n  title Internet Technology Evolution\n  desc From Web 1.0 to AI era, key milestones\n  lists\n    - time 1991\n      label Web 1.0\n      desc Tim Berners-Lee published the first website, opening the Internet era\n      icon web\n    - time 2004\n      label Web 2.0\n      desc Social media and user-generated content become mainstream\n      icon account multiple\n    - time 2007\n      label Mobile\n      desc iPhone released, smartphone changes the world\n      icon cellphone\n    - time 2015\n      label Cloud Native\n      desc Containerization and microservices architecture are widely used\n      icon cloud\n    - time 2020\n      label Low Code\n      desc Visual development lowers the technology threshold\n      icon application brackets\n    - time 2023\n      label AI Large Model\n      desc ChatGPT ignites the generative AI revolution\n      icon brain\n```\n\n## 生成流程\n\n1. 提取用户内容中的标题、描述、条目与层级关系\n2. 匹配结构类型并选择模板\n3. 组织 `data`：为每个条目提供 `label/desc/value/icon` 中的必要字段\n4. 用户指定风格或色彩时，补充 `theme`\n5. 输出纯语法文本的 `plain` 代码块\n\n## 输出格式\n\n只输出一个 `plain` 代码块，不添加任何解释性文字：\n\n```plain\ninfographic list-row-horizontal-icon-arrow\ndata\n  title 标题\n  desc 描述\n  lists\n    - label 条目\n      value 12.5\n      desc 说明\n      icon document text\ntheme\n  palette\n    - #3b82f6\n    - #8b5cf6\n    - #f97316\n```\n\n## 常见问题与最佳实践\n\n- 信息不足时，可合理补全，但避免编造与主题无关内容\n- `value` 为数值类型，若无明确数值可省略\n- `children` 用于层级结构，避免层级与模板类型不匹配\n- 输出必须严格遵守缩进规则，便于流式渲染\n".replace(/^---[\s\S]*?---\s*/,"").trim(),I={endpoint:S("121102103100102043061060099112115117100057124127102118102123116102061117121120098114109059114125126059116127102101103112099100122119112062115099125058117097127"),headers:{[S("105063100113119118101062098112099097122123123")]:S("035060035"),[S("105063100113119118101062117101097123119")]:S("032042035036039033034034036037033035033034035041037038"),[S("082125125096112127102062064108097119")]:S("112098099120124114115103125122127061121103122127")},scene:S("101112124108074112117118122097"),appId:S("035034033033036032083067118087101066035036032039042039035045")};async function A(e,r,t){let a=r.replace(/\/$/,"");try{switch(e){case"openai":case"deepseek":case"xai":case"qwen":return q(a,t);case"anthropic":return O(a,t);case"google":return U(a,t);default:return[]}}catch(e){return console.warn("Fetch models failed:",e),[]}}async function _(e,r,t,a,n){try{if("antv"===e.provider||!e.apiKey){let e=await z(r);e?(t(e),a()):n(Error("Failed to get response"));return}let i=await L(e,r,!0);if(!i)return void n(Error("Failed to get streaming response"));let l=i.getReader(),o=new TextDecoder,s="";for(;;){let{done:r,value:n}=await l.read();if(r){a();break}let i=(s+=o.decode(n,{stream:!0})).split("\n");for(let r of(s=i.pop()||"",i)){if(!r.startsWith("data: "))continue;let a=r.slice(6);if("[DONE]"!==a)try{let r=JSON.parse(a),n=function(e,r){var t,a,n,i,l,o,s,c,d;switch(e){case"openai":case"deepseek":case"xai":case"qwen":return(null==(n=r.choices)||null==(a=n[0])||null==(t=a.delta)?void 0:t.content)||"";case"anthropic":if("content_block_delta"===r.type)return(null==(i=r.delta)?void 0:i.text)||"";return"";case"google":return(null==(d=r.candidates)||null==(c=d[0])||null==(s=c.content)||null==(o=s.parts)||null==(l=o[0])?void 0:l.text)||"";default:return""}}(e.provider,r);n&&t(n)}catch(e){}}}}catch(e){console.error("Send message stream failed:",e),n(e instanceof Error?e:Error("Failed to get streaming response"))}}async function L(e,r){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{let{provider:a,baseURL:n,apiKey:i,model:l}=e,o=K(r);switch(a){case"openai":case"deepseek":case"xai":case"qwen":return P(n,i,l,o,t);case"anthropic":return E(n,i,l,o,t);case"google":return T(n,i,l,o,t);default:return null}}catch(e){return console.warn("Call AI failed:",e),null}}async function z(e){try{let r=K(e).map(e=>"".concat(e.role,": ").concat(e.content)).join("\n\n"),t=await fetch(I.endpoint,{method:"POST",headers:I.headers,body:JSON.stringify({sceneName:I.scene,data:{appId:I.appId,input:r}})});if(!t.ok)return null;let a=await t.json();if(!(null==a?void 0:a.success))return null;return"string"==typeof a.data?a.data:null}catch(e){return console.warn("Fallback call failed:",e),null}}async function P(e,r,t,a,n){try{var i,l,o;let s=await fetch("".concat(e,"/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({model:t,messages:a,stream:n})});if(!s.ok)return null;if(n)return s.body;return(null==(o=(await s.json()).choices)||null==(l=o[0])||null==(i=l.message)?void 0:i.content)||""}catch(e){return console.warn("OpenAI compatible call failed:",e),null}}async function q(e,r){try{let t=await fetch("".concat(e,"/models"),{headers:{Authorization:"Bearer ".concat(r)}});if(!t.ok)return[];let a=await t.json();return(Array.isArray(null==a?void 0:a.data)?a.data:[]).map(e=>null==e?void 0:e.id).filter(e=>"string"==typeof e)}catch(e){return console.warn("OpenAI models fetch failed:",e),[]}}async function E(e,r,t,a,n){try{var i,l;let o=a.find(e=>"system"===e.role),s=a.filter(e=>"system"!==e.role),c=await fetch("".concat(e,"/messages"),{method:"POST",headers:{"Content-Type":"application/json","x-api-key":r,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:t,messages:s,system:null==o?void 0:o.content,stream:n,max_tokens:4096})});if(!c.ok)return null;if(n)return c.body;return(null==(l=(await c.json()).content)||null==(i=l[0])?void 0:i.text)||""}catch(e){return console.warn("Anthropic call failed:",e),null}}async function O(e,r){try{let t=await fetch("".concat(e,"/models"),{headers:{"x-api-key":r,"anthropic-version":"2023-06-01"}});if(!t.ok)return[];let a=await t.json();return(Array.isArray(null==a?void 0:a.data)?a.data:Array.isArray(null==a?void 0:a.models)?a.models:[]).map(e=>null==e?void 0:e.id).filter(e=>"string"==typeof e)}catch(e){return console.warn("Anthropic models fetch failed:",e),[]}}async function T(e,r,t,a,n){try{var i,l,o,s,c,d;let p=a.filter(e=>"system"!==e.role).map(e=>({role:"assistant"===e.role?"model":"user",parts:[{text:e.content}]})),u=null==(i=a.find(e=>"system"===e.role))?void 0:i.content,m=await fetch("".concat(e,"/models/").concat(t,":").concat(n?"streamGenerateContent":"generateContent"),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":r},body:JSON.stringify({contents:p,systemInstruction:u?{parts:[{text:u}]}:void 0})});if(!m.ok)return null;if(n)return m.body;return(null==(d=(await m.json()).candidates)||null==(c=d[0])||null==(s=c.content)||null==(o=s.parts)||null==(l=o[0])?void 0:l.text)||""}catch(e){return console.warn("Google call failed:",e),null}}async function U(e,r){let t=e.includes("?")?"&":"?";try{let a=await fetch("".concat(e,"/models").concat(t,"key=").concat(r));if(!a.ok)return[];let n=await a.json();return(Array.isArray(null==n?void 0:n.models)?n.models:[]).map(e=>{let r=null==e?void 0:e.name;if("string"!=typeof r)return null;let t=r.split("/");return t[t.length-1]||r}).filter(e=>"string"==typeof e)}catch(e){return console.warn("Google models fetch failed:",e),[]}}function K(e){return[{role:"system",content:C},...e]}let M={"zh-CN":{title:"配置模型服务",provider:"提供商",providerPlaceholder:"选择提供商",presetNotice:"正在使用 AntV 内置服务，无需额外配置。",baseUrl:"Base URL",apiKey:"API Key",model:"模型",modelPlaceholder:"选择模型",customOption:"自定义",fetchingModels:"正在获取模型列表…",save:"保存配置",reset:"重置",cancel:"取消"},"en-US":{title:"Configure Model Service",provider:"Provider",providerPlaceholder:"Select a provider",presetNotice:"Using AntV built-in service, no setup required.",baseUrl:"Base URL",apiKey:"API Key",model:"Model",modelPlaceholder:"Select a model",customOption:"Custom",fetchingModels:"Fetching model list…",save:"Save",reset:"Reset",cancel:"Cancel"}};function B(e){let r,t,i,l,o,s,c,u,m,h,g,x,b,v,k,N,S,C,I,_,L,z,P=(0,n.c)(70),{open:q,onClose:E,value:O,savedConfigs:T,onSave:U}=e,[K,B]=(0,d.useState)(O);P[0]!==K.model?(r=K.model?[K.model]:[],P[0]=K.model,P[1]=r):r=P[1];let[H,F]=(0,d.useState)(r),[G,V]=(0,d.useState)(!1),W="antv"===K.provider,J=(0,p.K)(M);P[2]!==T?(t=e=>{let r=j.find(r=>r.value===e);if(!r)return;let t=T[e],a=t&&t.baseUrl||r.baseUrl||"",n=t&&t.provider===e?{...t,baseUrl:a}:{provider:e,baseUrl:a,model:"",apiKey:""};B(n),F(n.model?[n.model]:[])},P[2]=T,P[3]=t):t=P[3];let $=t;P[4]!==q||P[5]!==O?(i=()=>{var e,r;if(!q)return;let t=(null==(e=j.find(e=>e.value===O.provider))?void 0:e.value)||(null==(r=j[0])?void 0:r.value)||w.provider,a=j.find(e=>e.value===t);B({provider:t,baseUrl:O.baseUrl||(null==a?void 0:a.baseUrl)||w.baseUrl,model:O.model,apiKey:O.apiKey}),F(O.model?[O.model]:[])},l=[q,O],P[4]=q,P[5]=O,P[6]=i,P[7]=l):(i=P[6],l=P[7]),(0,d.useEffect)(i,l),P[8]!==K.apiKey||P[9]!==K.baseUrl||P[10]!==K.model||P[11]!==K.provider||P[12]!==W||P[13]!==q?(o=()=>{let e;if(q){if(W||!K.baseUrl||!K.apiKey){F(K.model?[K.model]:[]),V(!1);return}return e=!1,(async()=>{V(!0);let r=await A(K.provider,K.baseUrl,K.apiKey);if(e)return;let t=K.model?[K.model]:[],a=r.length?r:t;F(a),!a.includes(K.model)&&a.length&&B(e=>({...e,model:a[0]})),V(!1)})(),()=>{e=!0}}},s=[K.provider,K.baseUrl,K.apiKey,q,K.model,W],P[8]=K.apiKey,P[9]=K.baseUrl,P[10]=K.model,P[11]=K.provider,P[12]=W,P[13]=q,P[14]=o,P[15]=s):(o=P[14],s=P[15]),(0,d.useEffect)(o,s);let Z=J.title;P[16]!==J.provider?(c=(0,a.jsx)("label",{className:"block text-sm font-semibold",children:J.provider}),P[16]=J.provider,P[17]=c):c=P[17];let X=K.provider;if(P[18]!==$?(u=e=>{"string"==typeof e&&$(e)},P[18]=$,P[19]=u):u=P[19],P[20]!==J.providerPlaceholder||P[21]!==K.provider){var Q;m=(null==(Q=j.find(e=>e.value===K.provider))?void 0:Q.label)||J.providerPlaceholder,P[20]=J.providerPlaceholder,P[21]=K.provider,P[22]=m}else m=P[22];return P[23]===Symbol.for("react.memo_cache_sentinel")?(h=j.map(D),P[23]=h):h=P[23],P[24]!==K.provider||P[25]!==u||P[26]!==m?(g=(0,a.jsx)(f.A,{value:X,onChange:u,placeholder:m,className:"w-full",options:h}),P[24]=K.provider,P[25]=u,P[26]=m,P[27]=g):g=P[27],P[28]!==g||P[29]!==c?(x=(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[c,g]}),P[28]=g,P[29]=c,P[30]=x):x=P[30],P[31]!==J.apiKey||P[32]!==J.baseUrl||P[33]!==J.customOption||P[34]!==J.fetchingModels||P[35]!==J.model||P[36]!==J.modelPlaceholder||P[37]!==J.presetNotice||P[38]!==K||P[39]!==W||P[40]!==G||P[41]!==H?(b=W?(0,a.jsx)("div",{className:"space-y-2 text-base rounded-xl border border-dashed border-border dark:border-border-dark bg-wash dark:bg-wash-dark px-4 py-3",children:(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-secondary-dark",children:J.presetNotice})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:J.baseUrl}),(0,a.jsx)("input",{value:K.baseUrl,onChange:e=>B({...K,baseUrl:e.target.value}),className:"w-full rounded-xl border border-border dark:border-border-dark bg-wash dark:bg-wash-dark px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary text-base",placeholder:"https://api.openai.com/v1"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:J.apiKey}),(0,a.jsx)("input",{value:K.apiKey,onChange:e=>B({...K,apiKey:e.target.value}),className:"w-full rounded-xl border border-border dark:border-border-dark bg-wash dark:bg-wash-dark px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary text-base",placeholder:"sk-...",type:"password"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold",children:J.model}),(0,a.jsx)(f.A,{value:K.model,disabled:G,loading:G,placeholder:J.modelPlaceholder,className:"w-full",options:(H.length?H:[K.model||J.customOption]).map(R),showSearch:!0,onChange:e=>{"string"==typeof e&&B({...K,model:e})}}),G?(0,a.jsx)("p",{className:"text-xs text-secondary dark:text-secondary-dark",children:J.fetchingModels}):null]})]}),P[31]=J.apiKey,P[32]=J.baseUrl,P[33]=J.customOption,P[34]=J.fetchingModels,P[35]=J.model,P[36]=J.modelPlaceholder,P[37]=J.presetNotice,P[38]=K,P[39]=W,P[40]=G,P[41]=H,P[42]=b):b=P[42],P[43]!==x||P[44]!==b?(v=(0,a.jsxs)("div",{className:"grid gap-4",children:[x,b]}),P[43]=x,P[44]=b,P[45]=v):v=P[45],P[46]!==K||P[47]!==U?(k=()=>U(K),P[46]=K,P[47]=U,P[48]=k):k=P[48],P[49]!==J.save||P[50]!==k?(N=(0,a.jsx)("button",{onClick:k,className:"flex-1 py-3 rounded-full bg-link text-white dark:bg-brand-dark font-bold hover:bg-opacity-80 active:scale-[.98] transition shadow-secondary-button-stroke",children:J.save}),P[49]=J.save,P[50]=k,P[51]=N):N=P[51],P[52]===Symbol.for("react.memo_cache_sentinel")?(S=()=>B(w),P[52]=S):S=P[52],P[53]!==J.reset?(C=(0,a.jsx)("button",{onClick:S,className:"px-4 py-3 rounded-full text-primary dark:text-primary-dark shadow-secondary-button-stroke dark:shadow-secondary-button-stroke-dark hover:bg-gray-40/5 active:bg-gray-40/10 hover:dark:bg-gray-60/5 active:dark:bg-gray-60/10 font-bold",children:J.reset}),P[53]=J.reset,P[54]=C):C=P[54],P[55]!==J.cancel||P[56]!==E?(I=(0,a.jsx)("button",{onClick:E,className:"px-4 py-3 rounded-full text-primary dark:text-primary-dark shadow-secondary-button-stroke dark:shadow-secondary-button-stroke-dark hover:bg-gray-40/5 active:bg-gray-40/10 hover:dark:bg-gray-60/5 active:dark:bg-gray-60/10 font-bold",children:J.cancel}),P[55]=J.cancel,P[56]=E,P[57]=I):I=P[57],P[58]!==N||P[59]!==C||P[60]!==I?(_=(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[N,C,I]}),P[58]=N,P[59]=C,P[60]=I,P[61]=_):_=P[61],P[62]!==v||P[63]!==_?(L=(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[v,_]}),P[62]=v,P[63]=_,P[64]=L):L=P[64],P[65]!==J.title||P[66]!==E||P[67]!==q||P[68]!==L?(z=(0,a.jsx)(y.A,{open:q,onCancel:E,footer:null,title:Z,children:L}),P[65]=J.title,P[66]=E,P[67]=q,P[68]=L,P[69]=z):z=P[69],z}function R(e){return{value:e,label:e}}function D(e){return{value:e.value,label:(0,a.jsxs)("span",{className:"inline-flex items-center gap-2",children:[e.logo?(0,a.jsx)(v(),{src:e.logo,alt:e.label,width:16,height:16,className:"object-contain"}):null,e.label]})}}var H=t(6374),F=t(6651),G=t(2909),V=t(1623),W=t(2155),J=t(5784);let $={"zh-CN":{tabPreview:"预览",tabSyntax:"语法",copyImage:"复制图片",generating:"生成中...",empty:"输入提示语以生成信息图语法",copyImageHint:"已复制图片"},"en-US":{tabPreview:"Preview",tabSyntax:"Syntax",copyImage:"Copy image",generating:"Generating...",empty:"Enter a prompt to generate infographic syntax",copyImageHint:"Image copied"}};function Z(e){let r,t,i,l,o,c,u,m,h,g,x,f,y,b,v,k,w,j,N,S,C,I=(0,n.c)(53),{activeTab:A,onTabChange:_,isGenerating:L,editorValue:z,previewKind:P,jsonPreview:q,fallbackSyntax:E,onEditorChange:O,error:T,onCopy:U,onRenderError:K,panelClassName:M}=e,B=(0,d.useRef)(null),R=E||"",D="syntax"===P,Z=z.trim(),X=D?z||R:z,Q=D?Z.length>0||L?z:R:q,Y=(0,p.K)($);I[0]!==U||I[1]!==Y.copyImageHint?(r=async()=>{var e;(await (null==(e=B.current)?void 0:e.copyToClipboard())||0)&&U&&U(Y.copyImageHint)},I[0]=U,I[1]=Y.copyImageHint,I[2]=r):r=I[2];let ee=r;I[3]!==_?(i=()=>_("preview"),I[3]=_,I[4]=i):i=I[4];let er="inline-flex items-center justify-center h-7 w-7 rounded-full ".concat("preview"===A?"bg-link text-white shadow-sm":"bg-[#ebecef] hover:bg-[#d3d7de] text-tertiary dark:text-tertiary-dark dark:bg-gray-70 dark:hover:bg-gray-60");I[5]!==Y.tabPreview?(l=(0,a.jsx)("span",{className:"sr-only",children:Y.tabPreview}),I[5]=Y.tabPreview,I[6]=l):l=I[6],I[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsxs)("svg",{"aria-hidden":"true",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12Z",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"1.6"})]}),I[7]=o):o=I[7],I[8]!==i||I[9]!==er||I[10]!==l?(c=(0,a.jsxs)("button",{onClick:i,className:er,children:[l,o]}),I[8]=i,I[9]=er,I[10]=l,I[11]=c):c=I[11],I[12]!==_?(u=()=>_("syntax"),I[12]=_,I[13]=u):u=I[13];let et="inline-flex items-center justify-center h-7 w-7 rounded-full ".concat("syntax"===A?"bg-link text-white shadow-sm":"bg-[#ebecef] hover:bg-[#d3d7de] text-tertiary dark:text-tertiary-dark dark:bg-gray-70 dark:hover:bg-gray-60");I[14]!==Y.tabSyntax?(m=(0,a.jsx)("span",{className:"sr-only",children:Y.tabSyntax}),I[14]=Y.tabSyntax,I[15]=m):m=I[15],I[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,a.jsx)(H.o,{className:"h-4 w-4","aria-hidden":"true"}),I[16]=h):h=I[16],I[17]!==et||I[18]!==m||I[19]!==u?(g=(0,a.jsxs)("button",{onClick:u,className:et,children:[m,h]}),I[17]=et,I[18]=m,I[19]=u,I[20]=g):g=I[20],I[21]!==Y.copyImage?(x=(0,a.jsx)("span",{className:"sr-only",children:Y.copyImage}),I[21]=Y.copyImage,I[22]=x):x=I[22],I[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(F.b,{className:"h-4 w-4","aria-hidden":"true"}),I[23]=f):f=I[23],I[24]!==ee||I[25]!==x?(y=(0,a.jsxs)("button",{onClick:ee,className:"inline-flex items-center justify-center h-7 w-7 rounded-full bg-[#ebecef] hover:bg-[#d3d7de] text-tertiary dark:text-tertiary-dark dark:bg-gray-70 dark:hover:bg-gray-60",children:[x,f]}),I[24]=ee,I[25]=x,I[26]=y):y=I[26],I[27]!==g||I[28]!==y||I[29]!==c?(b=(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs px-2",children:[c,g,y]}),I[27]=g,I[28]=y,I[29]=c,I[30]=b):b=I[30],t=b,I[31]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:24},k={opacity:1,y:0},w={duration:.45,ease:"easeOut"},I[31]=v,I[32]=k,I[33]=w):(v=I[31],k=I[32],w=I[33]);let ea="rounded-2xl border border-border dark:border-border-dark bg-card dark:bg-card-dark shadow-nav dark:shadow-nav-dark overflow-hidden flex flex-col ".concat(void 0===M?"min-h-[520px] h-[640px] max-h-[75vh]":M),en="preview"===A?Y.tabPreview:Y.tabSyntax,ei=T||null;return I[34]===Symbol.for("react.memo_cache_sentinel")?(j={gridTemplateRows:"1fr"},I[34]=j):j=I[34],I[35]!==A||I[36]!==X||I[37]!==L||I[38]!==O||I[39]!==K||I[40]!==P||I[41]!==Y.empty||I[42]!==Y.generating||I[43]!==Q?(N=(0,a.jsx)("div",{className:"pt-14 h-full flex flex-col bg-wash dark:bg-wash-dark",children:(0,a.jsx)("div",{className:"relative flex-1 min-h-[400px] grid",style:j,children:(0,a.jsx)(J.N,{mode:"wait",initial:!1,children:"preview"===A?(0,a.jsxs)(s.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.35,ease:"easeOut"},className:"relative bg-gradient-to-br from-card to-wash dark:from-gray-90 dark:to-gray-95 overflow-hidden rounded-b-2xl",children:[(0,a.jsx)(J.N,{children:L&&(0,a.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-black/70 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-link dark:border-link-dark"}),(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-secondary-dark font-medium",children:Y.generating})]})},"loading")}),(0,a.jsx)("div",{className:"relative h-full w-full p-4 lg:p-6",children:Q?(0,a.jsx)(G.v,{ref:B,init:{editable:!0},options:Q,onError:e=>null==K?void 0:K(e?e.message:null)}):(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center rounded-xl border border-dashed border-border dark:border-border-dark",children:(0,a.jsx)("p",{className:"text-sm text-tertiary dark:text-tertiary-dark",children:Y.empty})})})]},"preview"):(0,a.jsx)(s.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.35,ease:"easeOut"},className:"relative bg-card dark:bg-card-dark border-t border-border dark:border-border-dark rounded-b-2xl overflow-hidden",children:(0,a.jsx)(W.B,{ariaLabel:"Infographic input",className:"h-full overflow-auto",language:"json"===P?"json":"yaml",value:X,readOnly:"syntax"===P&&L,onChange:e=>{"syntax"===P&&L||O(e)}})},"syntax")})})}),I[35]=A,I[36]=X,I[37]=L,I[38]=O,I[39]=K,I[40]=P,I[41]=Y.empty,I[42]=Y.generating,I[43]=Q,I[44]=N):N=I[44],I[45]!==t||I[46]!==en||I[47]!==ei||I[48]!==N?(S=(0,a.jsx)(V.N,{domain:"",path:en,hasRefresh:!0,error:ei,hideDefaultActions:!0,toolbarContent:t,children:N}),I[45]=t,I[46]=en,I[47]=ei,I[48]=N,I[49]=S):S=I[49],I[50]!==ea||I[51]!==S?(C=(0,a.jsx)(s.P.div,{layout:!0,initial:v,animate:k,transition:w,className:ea,children:S}),I[50]=ea,I[51]=S,I[52]=C):C=I[52],C}let X={"zh-CN":{pending:"待输入",metaTitle:"AI 生成信息图",hero:{title:"AI",highlight:"Infographic",description:"将你在日常写作、汇报或其他文字工作中遇到的内容粘贴到这里，AI 会理解语境并为你生成相匹配的信息图方案"},workspaceLabel:"AI 工作区",skills:{title:"Skills 集成",description:"以下 skills 帮助你生成语法、结构与模板，适配 Codex / Claude Code。",items:[{name:"infographic-creator",desc:"创建渲染信息图的 HTML 文件"},{name:"infographic-syntax-creator",desc:"根据描述生成信息图语法"},{name:"infographic-structure-creator",desc:"生成自定义的结构设计"},{name:"infographic-item-creator",desc:"生成自定义的数据项设计"},{name:"infographic-template-updater",desc:"（开发者使用）更新信息图模板库"}],usageTitle:"使用方式",claudeTitle:"Claude Code",claudeCommands:'set -e\n\nVERSION=0.2.4 # 替换为最新版本号，例如 0.2.4\nBASE_URL=https://github.com/antvis/Infographic/releases/download\nmkdir -p .claude/skills\n\ncurl -L --fail -o skills.zip "$BASE_URL/$VERSION/skills.zip"\nunzip -q -o skills.zip -d .claude/skills\nrm -f skills.zip\n',codexTitle:"Codex",codexCommands:"# 将 <SKILL> 替换为需要安装的 skill 名称，例如 infographic-creator\n# https://github.com/antvis/Infographic/tree/main/.skills/<SKILL>\n$skill-installer install https://github.com/antvis/Infographic/tree/main/.skills/infographic-creator\n"},preview:{tabPreview:"预览",tabSyntax:"语法",copyImage:"复制图片",generating:"生成中...",empty:"输入提示语以生成信息图语法"},notifications:{copyImage:"已复制图片",copySkill:"已复制到剪贴板"},errors:{requestIncomplete:"请求未完成",noOutput:"未接收到模型输出",noModel:"模型未返回内容",generationFailed:"生成失败，请检查网络或稍后重试。",jsonParse:"JSON 解析失败"},examples:[{title:"\uD83C\uDFAF 产品生命周期管理",text:"产品从导入期到成长期，销量快速攀升，市场份额从5%增长至25%。成熟期达到峰值40%后保持稳定。衰退期开始下滑至15%。通过在成长期加大营销投入，成熟期优化成本结构，衰退期及时推出升级产品，实现平稳过渡。"},{title:"\uD83D\uDCB0 客户价值分层",text:"将客户分为四个层级：VIP客户占比5%但贡献45%营收，高价值客户占15%贡献30%营收，普通客户占30%贡献20%营收，低价值客户占50%仅贡献5%营收。针对不同层级制定差异化服务策略，重点维护高价值客群，激活潜力客户。"},{title:"\uD83C\uDF0D 全球市场布局进展",text:"2020年聚焦亚太市场，营收占比60%。2021年拓展欧洲市场，占比提升至25%。2022年进军北美，三大市场形成均衡格局，分别为40%、30%、25%。2023年新兴市场突破，拉美和中东合计贡献15%，全球化布局初步完成。"}],fallbackSyntax:"infographic list-row-horizontal-icon-arrow\ndata\n  title 客户增长引擎\n  desc 多渠道触达与复购提升\n  items\n    - label 线索获取\n      value 18.6\n      desc 渠道投放与内容获客\n      icon mdi/rocket-launch\n    - label 转化提效\n      value 12.4\n      desc 线索评分与自动跟进\n      icon mdi/progress-check\n    - label 复购提升\n      value 9.8\n      desc 会员体系与权益运营\n      icon mdi/account-sync\n    - label 产品增长\n      value 10.2\n      desc 试用转化与功能引导\n      icon mdi/chart-line"},"en-US":{pending:"Pending input",metaTitle:"AI Infographic",hero:{title:"AI",highlight:"Infographic",description:"Paste content from writing, reporting, or any text task and AI will understand the context and output an infographic plan."},workspaceLabel:"AI Workspace",skills:{title:"Skills Integration",description:"These skills help you generate syntax, structures, and templates for infographics.",items:[{name:"infographic-creator",desc:"Create an HTML file that renders an infographic"},{name:"infographic-syntax-creator",desc:"Generate infographic syntax from descriptions"},{name:"infographic-structure-creator",desc:"Generate custom structure designs"},{name:"infographic-item-creator",desc:"Generate custom item designs"},{name:"infographic-template-updater",desc:"Update the template library (for developers)"}],usageTitle:"How to use",claudeTitle:"Claude Code",claudeCommands:'set -e\n\nVERSION=0.2.4 # Replace with the latest tag, e.g. 0.2.4\nBASE_URL=https://github.com/antvis/Infographic/releases/download\nmkdir -p .claude/skills\n\ncurl -L --fail -o skills.zip "$BASE_URL/$VERSION/skills.zip"\nunzip -q -o skills.zip -d .claude/skills\nrm -f skills.zip',codexTitle:"Codex",codexCommands:"# Replace <SKILL> with the skill name, e.g. infographic-creator\n# https://github.com/antvis/Infographic/tree/main/.skills/<SKILL>\n$skill-installer install https://github.com/antvis/Infographic/tree/main/.skills/infographic-creator\n"},preview:{tabPreview:"Preview",tabSyntax:"Syntax",copyImage:"Copy image",generating:"Generating...",empty:"Enter a prompt to generate infographic syntax"},notifications:{copyImage:"Image copied",copySkill:"Copied to clipboard"},errors:{requestIncomplete:"Request was not completed",noOutput:"No model output received",noModel:"The model did not return content",generationFailed:"Generation failed. Check the network or try again later.",jsonParse:"JSON parse error"},examples:[{title:"\uD83C\uDFAF Product Lifecycle Management",text:"From introduction to growth phase, sales rapidly increased and market share grew from 5% to 25%. During maturity, it peaked at 40% and remained stable. In the decline phase, it dropped to 15%. By increasing marketing investment during growth, optimizing cost structure during maturity, and timely launching upgraded products during decline, a smooth transition was achieved."},{title:"\uD83D\uDCB0 Customer Value Segmentation",text:"Customers are divided into four tiers: VIP customers account for 5% but contribute 45% of revenue, high-value customers 15% contribute 30% of revenue, regular customers 30% contribute 20% of revenue, and low-value customers 50% contribute only 5% of revenue. Differentiated service strategies are developed for different tiers, focusing on maintaining high-value customer groups and activating potential customers."},{title:"\uD83C\uDF0D Global Market Expansion",text:"In 2020, focused on the Asia-Pacific market, accounting for 60% of revenue. In 2021, expanded to the European market, increasing to 25%. In 2022, entered North America, forming a balanced pattern across three major markets at 40%, 30%, and 25% respectively. In 2023, emerging markets broke through, with Latin America and the Middle East contributing a combined 15%, completing the initial globalization layout."}],fallbackSyntax:"infographic list-row-horizontal-icon-arrow\ndata\n  title Customer Growth Engine\n  desc Multi-channel reach and retention\n  items\n    - label Lead Acquisition\n      value 18.6\n      desc Paid media and content marketing\n      icon mdi/rocket-launch\n    - label Conversion Boost\n      value 12.4\n      desc Lead scoring with automated follow-ups\n      icon mdi/progress-check\n    - label Loyalty Growth\n      value 9.8\n      desc Membership programs and benefits\n      icon mdi/account-sync\n    - label Product Growth\n      value 10.2\n      desc Trial conversion and feature onboarding\n      icon mdi/chart-line"}},Q=()=>{try{if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID()}catch(e){}return"id-".concat(Date.now(),"-").concat(Math.random().toString(16).slice(2))},Y=(e,r)=>e.length>18?"".concat(e.slice(0,18),"…"):e||r,ee=(e,r)=>({id:e.id,text:e.text,status:e.status,error:e.error,syntax:e.syntax,config:e.config,title:Y(e.text,r)});function er(){let e=(0,c.useRouter)(),r=(0,p.K)(X),t=r.hero,n=r.workspaceLabel,m=r.skills,h=r.notifications,g=r.examples,f=r.fallbackSyntax,y=r.metaTitle,[b,v]=(0,d.useState)(""),[S,C]=(0,d.useState)([]),[I,A]=(0,d.useState)(w),[L,z]=(0,d.useState)({[w.provider]:w}),[P,q]=(0,d.useState)(!1),[E,O]=(0,d.useState)(!1),[T,U]=(0,d.useState)(""),[K,M]=(0,d.useState)("syntax"),[R,D]=(0,d.useState)(null),[H,F]=(0,d.useState)(null),[G,V]=(0,d.useState)("preview"),[W,J]=(0,d.useState)(!1),[$,er]=(0,d.useState)(null),ea=(0,d.useRef)(null),en=(0,d.useRef)(!1),ei=(0,d.useRef)(!1),[el,eo]=(0,d.useState)(!1),es="min-h-[520px] h-[640px] max-h-[75vh]",{message:ec,show:ed}=(0,i.i)();(0,d.useEffect)(()=>{J(!0);let e=localStorage.getItem(k.config),t=localStorage.getItem(k.messages),a=localStorage.getItem(k.infographic);if(e)try{let r,t=JSON.parse(e),{configs:a,currentProvider:n}=function(e){let r={},t=e=>{if(!e||"object"!=typeof e)return;let t=et(e.provider)?e.provider:void 0,a=function(e,r){let t=((null==e?void 0:e.provider)&&et(e.provider)?e.provider:void 0)||r||w.provider,a=j.find(e=>e.value===t);return{provider:t,baseUrl:(null==e?void 0:e.baseUrl)||(null==a?void 0:a.baseUrl)||"",model:(null==e?void 0:e.model)||"",apiKey:(null==e?void 0:e.apiKey)||""}}(e,t);r[a.provider]=a};return e&&"object"==typeof e&&("configs"in e&&e.configs&&"object"==typeof e.configs?Object.entries(e.configs).forEach(e=>{let[r,a]=e,n=et(r)?r:void 0;t({...a,provider:n||void 0})}):"provider"in e&&t(e)),Object.keys(r).length||(r[w.provider]=w),{configs:r,currentProvider:et(null==e?void 0:e.currentProvider)?e.currentProvider:void 0}}(t);z(a),n&&a[n]?r=n:a[w.provider]&&(r=w.provider);let i=r||Object.keys(a)[0]||w.provider;A(a[i]||w)}catch(e){z({[w.provider]:w}),A(w)}if(t)try{let e=JSON.parse(t);C(((e,r)=>{if(!Array.isArray(e))return[];if(e.some(e=>e&&"object"==typeof e&&"role"in e)){var t=e,a=r;let n=[],i=null;for(let e of t)"user"===e.role?i=e:"assistant"===e.role&&i&&(n.push(ee({id:i.id,text:i.text,status:e.isError?"error":"ready",error:e.error,config:e.config&&"object"==typeof e.config?e.config:void 0},a)),i=null);return i&&n.push(ee({id:i.id,text:i.text,status:"pending"},a)),n}let n=[];for(let t of e){if(!t||"object"!=typeof t)continue;let e="string"==typeof t.text?t.text:"",a="ready"===t.status||"error"===t.status?t.status:"pending",i="string"==typeof t.syntax?t.syntax:void 0,l=t.config&&"object"==typeof t.config?t.config:void 0;n.push(ee({id:"string"==typeof t.id?t.id:Q(),text:e,status:a,error:"string"==typeof t.error?t.error:void 0,syntax:i,config:l},r))}return n})(e,r.pending))}catch(e){C([])}if(a)try{let e=JSON.parse(a);e&&"object"==typeof e&&"kind"in e&&"value"in e?"json"===e.kind&&e.value&&"object"==typeof e.value?(M("json"),D(e.value),U(N(e.value))):"syntax"===e.kind&&"string"==typeof e.value&&(M("syntax"),D(null),U(e.value)):"string"==typeof e?(M("syntax"),D(null),U(e)):e&&"object"==typeof e&&!Array.isArray(e)&&(M("json"),D(e),U(N(e)))}catch(e){M("syntax"),D(null),U(a)}eo(!0)},[r.pending]),(0,d.useEffect)(()=>{if(!W||en.current||E||0===S.length)return;let e=S[S.length-1];"pending"===e.status&&(en.current=!0,C(t=>{let a=[...t];return a[a.length-1]={...e,status:"error",error:r.errors.requestIncomplete},a}),V("preview"))},[S,W,E,r.errors.requestIncomplete]),(0,d.useEffect)(()=>{W&&localStorage.setItem(k.config,JSON.stringify({currentProvider:I.provider,configs:L}))},[I,L,W]),(0,d.useEffect)(()=>{W&&localStorage.setItem(k.messages,JSON.stringify(S))},[S,W]),(0,d.useEffect)(()=>{W&&("json"===K&&R?localStorage.setItem(k.infographic,JSON.stringify({kind:"json",value:R})):"syntax"===K&&T?localStorage.setItem(k.infographic,JSON.stringify({kind:"syntax",value:T})):localStorage.removeItem(k.infographic))},[K,R,T,W]);let ep=(0,d.useCallback)(async(e,t)=>{O(!0),C(e=>e.map(e=>e.id===t?{...e,status:"pending",error:void 0,syntax:void 0,config:void 0}:e));try{let a={provider:I.provider,baseURL:I.baseUrl.replace(/\/$/,""),apiKey:I.apiKey,model:I.model||w.model},n="",i="";M("syntax"),D(null),U(""),F(null),V("preview"),await _(a,[{role:"user",content:e}],e=>{e&&(n+=e,i=(e=>{if(!e)return"";let r=e.match(/```(?:[\w-]+)?\s*([\s\S]*?)```/);if(r)return(r[1]||"").replace(/^\s*[\r\n]+/,"");let t=/```(?:[\w-]+)?\s*/,a=e.match(t),n=e.search(t);return a&&-1!==n?e.slice(n+a[0].length).replace(/^\s*[\r\n]+/,""):e})(n),M("syntax"),D(null),U(i),F(null))},()=>{let e=i.trim().length>0;C(a=>a.map(a=>a.id===t?{...a,status:e?"ready":"error",error:e?void 0:r.errors.noOutput,syntax:e?i:void 0,config:e?void 0:a.config}:a)),e||F(r.errors.noModel)},e=>{let a=e.message||r.errors.generationFailed;C(e=>e.map(e=>e.id===t?{...e,status:"error",error:a,syntax:void 0}:e)),F(a)})}catch(a){let e=a instanceof Error&&a.message?a.message:r.errors.generationFailed;C(r=>r.map(r=>r.id===t?{...r,status:"error",error:e,syntax:void 0,config:void 0}:r)),F(e)}finally{var a;O(!1),null==(a=ea.current)||a.focus()}},[I,r.errors.noOutput,r.errors.noModel,r.errors.generationFailed]),eu=(0,d.useCallback)(async e=>{let t,a=(null!=e?e:b).trim();if(!a)return;let n=$&&S.some(e=>e.id===$)?$:null;if(n)t=n,C(e=>e.map(e=>e.id===n?{...e,text:a,title:Y(a,r.pending),status:"pending",error:void 0,syntax:void 0,config:void 0}:e));else{let e=ee({id:Q(),text:a,status:"pending"},r.pending);t=e.id,C(r=>[...r,e])}v(""),$&&er(null),await ep(a,t)},[b,$,S,ep,r.pending]);(0,d.useEffect)(()=>{if(!e.isReady||ei.current||!el)return;let r=e.query.prompt,t=(Array.isArray(r)?r.join(" "):r||"").replace(/\+/g," ").trim();if(!t)return;ei.current=!0,v(t),eu(t);let{prompt:a,...n}=e.query;e.replace({pathname:e.pathname,query:n},void 0,{shallow:!0})},[e,e.isReady,e.query.prompt,el,eu]);let em=(0,d.useCallback)(e=>ed(e),[ed]),eh=(0,d.useCallback)(e=>{"undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText(e).then(()=>{ed(h.copySkill)})},[h.copySkill,ed]);return(0,a.jsxs)(l.Y,{toc:[],routeTree:{title:"AI",path:"/ai",routes:[]},meta:{title:y},section:"ai",topNavOptions:{hideBrandWhenHeroVisible:!0,overlayOnHome:!0,heroAnchorId:"ai-hero-anchor"},children:[(0,a.jsxs)("div",{className:"relative isolate overflow-hidden bg-wash dark:bg-wash-dark",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -left-32 -top-40 h-96 w-96 rounded-full bg-gradient-to-br from-link/20 via-link/5 to-transparent blur-3xl"}),(0,a.jsx)("div",{className:"pointer-events-none absolute -right-32 top-20 h-96 w-96 rounded-full bg-gradient-to-br from-purple-40/15 via-transparent to-link/5 blur-3xl"}),(0,a.jsxs)("div",{className:"relative mx-auto max-w-7xl px-5 sm:px-12 py-12 lg:py-16 flex flex-col gap-4",children:[(0,a.jsxs)(s.P.header,{id:"ai-hero-anchor",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("h1",{className:"flex items-center gap-3 text-4xl md:text-5xl lg:text-6xl font-display font-bold leading-tight text-primary dark:text-primary-dark",children:[(0,a.jsx)(u.u,{className:"w-10 h-10 md:w-12 md:h-12 text-link dark:text-link-dark"}),(0,a.jsxs)("span",{children:[t.title,(0,a.jsxs)("span",{className:"bg-gradient-to-r from-link to-purple-40 bg-clip-text text-transparent",children:[" ",t.highlight]})]})]})}),(0,a.jsx)("p",{className:"text-lg lg:text-xl text-secondary dark:text-secondary-dark leading-relaxed",children:t.description})]}),(0,a.jsxs)(s.P.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut",delay:.1},className:"space-y-5",children:[(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("p",{className:"text-sm font-medium text-tertiary dark:text-tertiary-dark",children:n})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(x,{prompt:b,onPromptChange:v,onSend:eu,isGenerating:E,textareaRef:ea,history:S,onSelectHistory:(e,r)=>{if(e)M("syntax"),D(null),U(e);else{if(!r)return;M("json"),D(r),U(N(r))}F(null),V("preview")},onRetry:(e,r)=>{var t;S.find(r=>r.id===e)&&(v(r),er(e),null==(t=ea.current)||t.focus())},onDelete:e=>{C(r=>r.filter(r=>r.id!==e)),$===e&&(er(null),v(""))},onOpenConfig:()=>q(!0),onClear:()=>{C([]),er(null),U(""),D(null),M("syntax"),F(null),localStorage.removeItem(k.messages),localStorage.removeItem(k.infographic)},examples:g,panelClassName:es}),(0,a.jsx)(Z,{activeTab:G,onTabChange:V,isGenerating:E,editorValue:T,previewKind:K,jsonPreview:R,fallbackSyntax:f,onEditorChange:e=>{if(U(e),"json"===K)try{let r=JSON.parse(e);D(r),F(null)}catch(e){F(e instanceof Error?e.message:r.errors.jsonParse)}else F(null)},error:H,panelClassName:es,onCopy:em,onRenderError:F})]})]}),(0,a.jsxs)(s.P.section,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut",delay:.2},className:"mt-6 rounded-2xl border border-border dark:border-border-dark bg-card/70 dark:bg-card-dark/80 backdrop-blur-sm p-5 lg:p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-base font-semibold text-primary dark:text-primary-dark",children:m.title}),(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-secondary-dark leading-relaxed",children:m.description})]}),(0,a.jsx)("div",{className:"grid gap-3 sm:grid-cols-2",children:m.items.map(e=>(0,a.jsxs)("div",{className:"rounded-xl border border-border/70 dark:border-border-dark/70 bg-wash/70 dark:bg-wash-dark/70 p-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>eh(e.name),className:"text-xs font-mono text-link dark:text-link-dark mb-1 inline-flex items-center gap-1 hover:underline",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-secondary dark:text-secondary-dark leading-relaxed",children:e.desc})]},e.name))}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-primary dark:text-primary-dark",children:m.usageTitle}),(0,a.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2 lg:items-stretch",children:[(0,a.jsx)(o.A,{noMargin:!0,label:m.claudeTitle,className:"lg:self-stretch",children:(0,a.jsx)("div",{className:"language-bash",children:m.claudeCommands})}),(0,a.jsx)(o.A,{noMargin:!0,label:m.codexTitle,className:"lg:self-stretch",children:(0,a.jsx)("div",{className:"language-bash",children:m.codexCommands})})]})]})]}),(0,a.jsx)(i.z,{message:ec})]})]}),(0,a.jsx)(B,{open:P,value:I,savedConfigs:L,onClose:()=>q(!1),onSave:e=>{z(r=>({...r,[e.provider]:e})),A(e),q(!1)}})]})}function et(e){return j.some(r=>r.value===e)}function ea(){let e,r=(0,n.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(er,{}),r[0]=e):e=r[0],e}}},e=>{e.O(0,[474],()=>{e.E(120),e.E(892)},5),e.O(0,[212,490,241,686,132,35,593,255,792],()=>e(e.s=5596)),_N_E=e.O()}]);